
Type.createNamespace('TestPlayer');TestPlayer.TestUtils=function(){}
TestPlayer.TestUtils.parseXML=function(markup){return XMLDocumentParser.parse(markup);}
TestPlayer.TestUtils.cleanHtml=function(){var $0=document.getElementById('contentIFrame');var $1=document.getElementById('treeContainer');var $2=document.getElementById('navigationContainer');if(!isNullOrUndefined($0)){document.body.removeChild($0);}if(!isNullOrUndefined($1)){document.body.removeChild($1);}if(!isNullOrUndefined($2)){document.body.removeChild($2);}}
TestPlayer.TestPlayerInit=function(){TestPlayer.TestPlayerInit.constructBase(this);}
TestPlayer.TestPlayerInit.prototype={$1_0:'xmlns=\"http://www.imsproject.org/xsd/imscp_rootv1p1p2\"\r\n            xmlns:adlcp=\"http://www.adlnet.org/xsd/adlcp_rootv1p2\"\r\n            xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n            xsi:schemaLocation= \r\n                  \"http://www.imsproject.org/xsd/imscp_rootv1p1p2 \r\n                   imscp_rootv1p1p2.xsd \r\n                   http://www.imsglobal.org/xsd/imsmd_rootv1p2p1\r\n                   imsmd_rootv1p2p1.xsd  \r\n                   http://www.adlnet.org/xsd/adlcp_rootv1p2\r\n                   adlcp_rootv1p2.xsd\"',$1_1:'xml:base=\"mycontent\"\r\n            xmlns=\"http://www.imsglobal.org/xsd/imscp_v1p1\"\r\n            xmlns:adlcp=\"http://www.adlnet.org/xsd/adlcp_v1p3\"\r\n            xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n            xsi:schemaLocation=\r\n                \"http://www.imsglobal.org/xsd/imscp_v1p1\r\n                 imscp_v1p1.xsd\r\n                 http://www.adlnet.org/xsd/adlcp_v1p3\r\n                 adlcp_v1p3.xsd\"',setup:function(){},teardown:function(){TestPlayer.TestUtils.cleanHtml();},tests:function(){test('IFrame',Delegate.create(this,function(){
ok(isNullOrUndefined(document.getElementById('contentIFrame')),'IFrame not exists');var $1_0=new Player.ContentPlayer(null,TestPlayer.TestUtils.parseXML('<manifest><metadata><schemaversion>1.2</schemaversion></metadata></manifest>'),false,false,false);ok(isNullOrUndefined(document.getElementById('contentIFrame')),'IFrame not exists');$1_0=new Player.ContentPlayer(null,TestPlayer.TestUtils.parseXML('<manifest><metadata><schemaversion>1.2</schemaversion><organizations></organizations></metadata></manifest>'),false,false,false);ok(isNullOrUndefined(document.getElementById('contentIFrame')),'IFrame not exists');$1_0=new Player.ContentPlayer(null,TestPlayer.TestUtils.parseXML('<manifest><metadata><schemaversion>CAM 1.3</schemaversion></metadata></manifest>'),false,false,false);ok(isNullOrUndefined(document.getElementById('contentIFrame')),'IFrame not exists');$1_0=new Player.ContentPlayer(null,TestPlayer.TestUtils.parseXML('<manifest><metadata><schemaversion>CAM 1.3</schemaversion><organizations></organizations></metadata></manifest>'),false,false,false);ok(isNullOrUndefined(document.getElementById('contentIFrame')),'IFrame not exists');$1_0=new Player.ContentPlayer(null,TestPlayer.TestUtils.parseXML('<manifest><metadata><schemaversion>1.2</schemaversion></metadata><organizations><organization></organization></organizations></manifest>'),false,false,false);ok(!isNullOrUndefined(document.getElementById('contentIFrame')),'IFrame exists');}));test('Tree',Delegate.create(this,function(){
ok(isNullOrUndefined(document.getElementById('treeContainer')),'DIV treeContainer not exists');PlayerConfiguration.TreeMinusIcon='img/minus.gif';PlayerConfiguration.TreePlusIcon='img/plus.gif';PlayerConfiguration.TreeLeafIcon='img/leaf.gif';var $1_0=new Player.ContentPlayer(null,TestPlayer.TestUtils.parseXML('<manifest>\r\n    <metadata><schemaversion>1.2</schemaversion></metadata>\r\n    <organizations>\r\n        <organization>\r\n            <title>Organization</title>\r\n            <item identifier=\"item_1\" identifierref=\"ref_item_1\">\r\n                <title>Item 1</title>\r\n                <item identifier=\"item_1_1\" identifierref=\"ref_item_1_1\">\r\n                    <title>Item 1_1</title>\r\n                </item>\r\n                <item identifier=\"item_1_2\" identifierref=\"ref_item_1_2\">\r\n                    <title>Item 1_2</title>\r\n                </item>\r\n            </item>\r\n            <item identifier=\"item_2\" identifierref=\"ref_item_2\">\r\n                <title>Item 2</title>\r\n                <item identifier=\"item_2_1\" identifierref=\"ref_item_2_1\">\r\n                    <title>Item 2_1</title>\r\n                </item>\r\n                <item identifier=\"item_2_2\" identifierref=\"ref_item_2_2\">\r\n                    <title>Item 2_2</title>\r\n                    <item identifier=\"item_2_2_1\" identifierref=\"ref_item_2_2_1\">\r\n                        <title>Item 2_2_1</title>\r\n                    </item>\r\n                </item>\r\n                <item identifier=\"item_2_3\" identifierref=\"ref_item_2_3\">\r\n                    <title>Item 2_3</title>\r\n                </item>\r\n            </item>\r\n        </organization>\r\n    </organizations>\r\n</manifest>'),false,false,false);var $1_1=document.getElementById('treeContainer');ok(!isNullOrUndefined($1_1),'DIV treeContainer exists');var $1_2=ScriptFX.UI.Control.getControl($1_1);ok(!isNullOrUndefined($1_2),'TreeView is found');equals($1_2.getMinusIcon(),'img/minus.gif','Correct \'minus\' icon');equals($1_2.getPlusIcon(),'img/plus.gif','Correct \'plus\' icon');equals($1_2.getChildrens().length,2,'Correct childrens count');var $1_3=$1_2.getChildrens()[0];equals($1_3.getChildrens().length,2,'Correct childrens count');var $1_4=$1_3.getChildrens()[0];equals($1_4.getChildrens().length,0,'Correct childrens count');var $1_5=$1_3.getChildrens()[1];equals($1_5.getChildrens().length,0,'Correct childrens count');var $1_6=$1_2.getChildrens()[1];equals($1_6.getChildrens().length,3,'Correct childrens count');var $1_7=$1_6.getChildrens()[0];equals($1_7.getChildrens().length,0,'Correct childrens count');var $1_8=$1_6.getChildrens()[1];equals($1_8.getChildrens().length,1,'Correct childrens count');var $1_9=$1_8.getChildrens()[0];equals($1_9.getChildrens().length,0,'Correct childrens count');var $1_A=$1_6.getChildrens()[2];equals($1_A.getChildrens().length,0,'Correct childrens count');equals($1_3.getText(),'Item 1','Correct title');equals($1_4.getText(),'Item 1_1','Correct title');equals($1_5.getText(),'Item 1_2','Correct title');equals($1_6.getText(),'Item 2','Correct title');equals($1_7.getText(),'Item 2_1','Correct title');equals($1_8.getText(),'Item 2_2','Correct title');equals($1_9.getText(),'Item 2_2_1','Correct title');equals($1_A.getText(),'Item 2_3','Correct title');ok(($1_2.get_userData())===$1_0.getActivityTree_V12().getOrganization(),'Correct tree user data - organization');equals(($1_3.get_userData()).getIdentifier(),'item_1','Correct identifier');equals(($1_4.get_userData()).getIdentifier(),'item_1_1','Correct identifier');equals(($1_5.get_userData()).getIdentifier(),'item_1_2','Correct identifier');equals(($1_6.get_userData()).getIdentifier(),'item_2','Correct identifier');equals(($1_7.get_userData()).getIdentifier(),'item_2_1','Correct identifier');equals(($1_8.get_userData()).getIdentifier(),'item_2_2','Correct identifier');equals(($1_9.get_userData()).getIdentifier(),'item_2_2_1','Correct identifier');equals(($1_A.get_userData()).getIdentifier(),'item_2_3','Correct identifier');}));test('Get SCORM version',Delegate.create(this,function(){
var $1_0=new Player.ContentPlayer(null,TestPlayer.TestUtils.parseXML(''),false,false,false);ok($1_0.getSCORMVersion()===0,'Correct. SCORM version not detected');$1_0=new Player.ContentPlayer(null,TestPlayer.TestUtils.parseXML(null),false,false,false);ok($1_0.getSCORMVersion()===0,'Correct. SCORM version not detected');$1_0=new Player.ContentPlayer(null,TestPlayer.TestUtils.parseXML('<manifest></manifest'),false,false,false);ok($1_0.getSCORMVersion()===0,'Correct. SCORM version not detected');$1_0=new Player.ContentPlayer(null,TestPlayer.TestUtils.parseXML('<manifest><metadata><schemaversion>1.2</schemaversion></metadata></manifest>'),false,false,false);ok($1_0.getSCORMVersion()===1,'Correct. SCORM version 1.2');$1_0=new Player.ContentPlayer(null,TestPlayer.TestUtils.parseXML('<manifest xmlns=\"http://www.imsproject.org/xsd/imscp_rootv1p1p2\"></manifest>'),false,false,false);ok($1_0.getSCORMVersion()===1,'Correct. SCORM version 1.2');$1_0=new Player.ContentPlayer(null,TestPlayer.TestUtils.parseXML('<manifest '+this.$1_0+'></manifest>'),false,false,false);ok($1_0.getSCORMVersion()===1,'Correct. SCORM version 1.2');$1_0=new Player.ContentPlayer(null,TestPlayer.TestUtils.parseXML('<manifest version=\"1.1\"></manifest>'),false,false,false);ok($1_0.getSCORMVersion()===1,'Correct. SCORM version 1.2');$1_0=new Player.ContentPlayer(null,TestPlayer.TestUtils.parseXML('<manifest><metadata><schemaversion>1.3</schemaversion></metadata></manifest>'),false,false,false);ok($1_0.getSCORMVersion()===2,'Correct. SCORM version 1.3');$1_0=new Player.ContentPlayer(null,TestPlayer.TestUtils.parseXML('<manifest><metadata><schemaversion>CAM 1.3</schemaversion></metadata></manifest>'),false,false,false);ok($1_0.getSCORMVersion()===2,'Correct. SCORM version 1.3');$1_0=new Player.ContentPlayer(null,TestPlayer.TestUtils.parseXML('<manifest><metadata><schemaversion>2004 3rd Edition</schemaversion></metadata></manifest>'),false,false,false);ok($1_0.getSCORMVersion()===2,'Correct. SCORM version 1.3');$1_0=new Player.ContentPlayer(null,TestPlayer.TestUtils.parseXML('<manifest><metadata><schemaversion>2004 4th Edition</schemaversion></metadata></manifest>'),false,false,false);ok($1_0.getSCORMVersion()===2,'Correct. SCORM version 1.3');$1_0=new Player.ContentPlayer(null,TestPlayer.TestUtils.parseXML('<manifest '+this.$1_1+'><metadata><schemaversion>2004 4th Edition</schemaversion></metadata></manifest>'),false,false,false);ok($1_0.getSCORMVersion()===2,'Correct. SCORM version 1.3');}));test('Organizations',Delegate.create(this,function(){
var $1_0=new Player.ContentPlayer(null,TestPlayer.TestUtils.parseXML('<manifest '+this.$1_0+'><metadata><schemaversion>1.2</schemaversion></metadata><organizations><organization identifier=\"Org1\"><title>org1</title></organization><organization identifier=\"Org2\"><title>org2</title></organization></organizations></manifest>'),false,false,false);ok($1_0.getSCORMVersion()===1,'Correct. SCORM version 1.2');var $1_1=$1_0.getActivityTree_V12();ok(!isNullOrUndefined($1_1),'ActivityTree for SCORM 1.2 exists');ok(isNullOrUndefined($1_0.getActivityTree_V13()),'ActivityTree for SCORM 1.3 is empty');ok(!isNullOrUndefined($1_1.getOrganization()),'Default organization is not empty');ok($1_1.getOrganization().getIdentifier()==='Org1','Default organization identifier \'Org1\'');ok($1_1.getOrganization().getTitle()==='org1','Default organization title \'org1\'');ok($1_1.getChildrensCount()===1,'Only one organization available');$1_0=new Player.ContentPlayer(null,TestPlayer.TestUtils.parseXML('<manifest '+this.$1_1+'><metadata><schemaversion>CAM 1.3</schemaversion></metadata><organizations><organization identifier=\"Org1\"><title>org1</title></organization><organization identifier=\"Org2\"><title>org2</title></organization></organizations></manifest>'),false,false,false);ok($1_0.getSCORMVersion()===2,'Correct. SCORM version 1.3');var $1_2=$1_0.getActivityTree_V13();ok(!isNullOrUndefined($1_2),'ActivityTree for SCORM 1.3 is not empty');ok(isNullOrUndefined($1_0.getActivityTree_V12()),'ActivityTree for SCORM 1.2 is empty');ok(!isNullOrUndefined($1_2.getOrganization()),'Default organization is not empty');ok($1_2.getOrganization().getIdentifier()==='Org1','Default organization identifier \'Org1\'');ok($1_2.getOrganization().getTitle()==='org1','Default organization title \'org1\'');ok($1_2.getChildrensCount()===1,'Only one organization available');}));}}
function main(){new TestPlayer.TestPlayerInit().run('TestPlayerInit');}
TestPlayer.TestUtils.createClass('TestPlayer.TestUtils');TestPlayer.TestPlayerInit.createClass('TestPlayer.TestPlayerInit',QUnitLibrary.QTest);
// ---- Do not remove this footer ----
// This script was generated using Script# v0.5.5.0 (http://projects.nikhilk.net/ScriptSharp)
// -----------------------------------
