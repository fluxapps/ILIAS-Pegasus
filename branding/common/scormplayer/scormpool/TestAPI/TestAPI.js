
Type.createNamespace('TestAPI');TestAPI.TestAPI=function(){TestAPI.TestAPI.constructBase(this);}
TestAPI.TestAPI.prototype={$1_0:null,setup:function(){this.$1_0=new SCORM_1_2.API_LIB(new SCORM_1_2.ActivityTreeNode());},teardown:function(){this.$1_0=null;},$1_1:function(){return undefined;},tests:function(){test('API Adapter functions',Delegate.create(this,function(){
var $1_0=Type.getInstanceType(this.$1_0);ok(Object.keyExists($1_0.prototype,'LMSInitialize'),'LMSInitialize in API');ok(Object.keyExists($1_0.prototype,'LMSFinish'),'LMSFinish in API');ok(Object.keyExists($1_0.prototype,'LMSCommit'),'LMSCommit in API');ok(Object.keyExists($1_0.prototype,'LMSSetValue'),'LMSSetValue in API');ok(Object.keyExists($1_0.prototype,'LMSGetValue'),'LMSGetValue in API');ok(Object.keyExists($1_0.prototype,'LMSGetLastError'),'LMSGetLastError in API');ok(Object.keyExists($1_0.prototype,'LMSGetErrorString'),'LMSGetErrorString in API');ok(Object.keyExists($1_0.prototype,'LMSGetDiagnostic'),'LMSGetDiagnostic in API');}));test('LMSInitialize',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSInitialize('notempty');equals($1_0,'false','Function must not complete successfully');equals(this.$1_0.LMSGetLastError(),'201','\'201\' (Invalid argument error)');$1_0=this.$1_0.LMSInitialize('');equals($1_0,'true','Function must complete successfully');equals(this.$1_0.LMSGetLastError(),'0','LMSInitialize shall set the API Error Code to \'0\' (No error) if it completes successfully');$1_0=this.$1_0.LMSInitialize('');equals($1_0,'false','Does not complete successfully (Called more than once by a launched SCO)');equals(this.$1_0.LMSGetLastError(),'101','shall set the API Error Code to \'101\' (General exception)');}));test('LMSFinish',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSFinish('');equals($1_0,'false','Shall not succeed, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('notempty');$1_0=this.$1_0.LMSFinish('');equals($1_0,'false','Shall not succeed, call to LMSInitialize was not successful');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSFinish('notempty');equals($1_0,'false','Shall accept only an empty string parameter');equals(this.$1_0.LMSGetLastError(),'201','\'201\' (Invalid argument error)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSFinish('');equals($1_0,'true','Completes successfully');equals(this.$1_0.LMSGetLastError(),'0','Shall set the API Error Code to \'0\' (No error) if it completes successfully');}));test('LMSCommit',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSCommit('');equals($1_0,'false','Shall not succeed, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('notempty');$1_0=this.$1_0.LMSCommit('');equals($1_0,'false','Shall not succeed, call to LMSInitialize was not successful');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSCommit('notempty');equals($1_0,'false','Shall accept only an empty string parameter');equals(this.$1_0.LMSGetLastError(),'201','\'201\' (Invalid argument error)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSCommit('');equals($1_0,'true','Completes successfully');equals(this.$1_0.LMSGetLastError(),'0','Shall set the API Error Code to \'0\' (No error) if it completes successfully');}));test('LMSGetValue basics',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.core.student_name');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('notempty');$1_0=this.$1_0.LMSGetValue('cmi.core.student_name');equals($1_0,'','Shall not succeed and return empty string, call to LMSInitialize was not successful');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.core.student_name');equals(typeof($1_0),'string','Shall return a string value');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.core.exit');equals($1_0,'','Shall not succeed and return empty string');equals(this.$1_0.LMSGetLastError()==='201'||this.$1_0.LMSGetLastError()==='404',true,'An error code of \'201\' (Invalid argument error) is also acceptable in this situation, however \'404\' is preferred');$1_0=this.$1_0.LMSGetValue('does_not_begin_with_cmi');equals($1_0,'','Shall not succeed and return empty string');equals(this.$1_0.LMSGetLastError()==='201'||this.$1_0.LMSGetLastError()==='401',true,'An error code of \'201\' (Invalid argument error) is also acceptable, however \'401\' is preferred');$1_0=this.$1_0.LMSGetValue(this.$1_1());equals($1_0,'','Shall not succeed and return empty string');equals(this.$1_0.LMSGetLastError()==='201'||this.$1_0.LMSGetLastError()==='401',true,'An error code of \'201\' (Invalid argument error) is also acceptable, however \'401\' is preferred');$1_0=this.$1_0.LMSGetValue(null);equals($1_0,'','Shall not succeed and return empty string');equals(this.$1_0.LMSGetLastError()==='201'||this.$1_0.LMSGetLastError()==='401',true,'An error code of \'201\' (Invalid argument error) is also acceptable, however \'401\' is preferred');$1_0=this.$1_0.LMSGetValue('cmi.core.foo');equals($1_0,'','Shall not succeed and return empty string');equals(this.$1_0.LMSGetLastError()==='201'||this.$1_0.LMSGetLastError()==='401',true,'An error code of \'401\'(Not implemented error) is also acceptable, however \'201\' is preferred');$1_0=this.$1_0.LMSGetValue('cmi.objectives.10.id');equals($1_0,'','Shall not succeed and return empty string');equals(this.$1_0.LMSGetLastError(),'201','Element in the position has not be set by the SCO. \'201\' (Invalid argument error)');$1_0=this.$1_0.LMSGetValue('cmi.core.student_name._children');equals($1_0,'','Shall not succeed and return empty string');equals(this.$1_0.LMSGetLastError()==='202'||this.$1_0.LMSGetLastError()==='201',true,'An API Error Code of \'201\' (Invalid argument error) is also acceptable, however \'202\' is preferred');$1_0=this.$1_0.LMSGetValue('cmi.core.student_name._count');equals($1_0,'','Shall not succeed and return empty string');equals(this.$1_0.LMSGetLastError()==='203'||this.$1_0.LMSGetLastError()==='201',true,'An API Error Code \'201\' (Invalid argument error) is also acceptable, however \'203\' is preferred.');}));test('LMSSetValue basics',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSSetValue('cmi.core.lesson_location','p1');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('notempty');$1_0=this.$1_0.LMSSetValue('cmi.core.lesson_location','01');equals($1_0,'','Shall not succeed and return empty string, call to LMSInitialize was not successful');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSSetValue('cmi.core.lesson_location','1');equals(typeof($1_0),'string','Shall return a string value');equals(this.$1_0.LMSGetLastError(),'0','No Error');equals(this.$1_0.LMSGetValue('cmi.core.lesson_location'),'1','Get lesson location return 1');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.lesson_location',10);equals(typeof($1_0),'string','Shall return a string value');equals(this.$1_0.LMSGetLastError(),'0','No Error');equals(this.$1_0.LMSGetValue('cmi.core.lesson_location'),'10','Get lesson location return 10');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.lesson_location',-10.5);equals(typeof($1_0),'string','Shall return a string value');equals(this.$1_0.LMSGetLastError(),'0','No Error');equals(this.$1_0.LMSGetValue('cmi.core.lesson_location'),'-10.5','Get lesson location return -10.5');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.lesson_location',this.$1_1());equals(typeof($1_0),'string','Shall return a string value');equals(this.$1_0.LMSGetLastError(),'0','No Error');equals(this.$1_0.LMSGetValue('cmi.core.lesson_location'),'','Get lesson location return empty string');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.lesson_location',null);equals(typeof($1_0),'string','Shall return a string value');equals(this.$1_0.LMSGetLastError(),'0','No Error');equals(this.$1_0.LMSGetValue('cmi.core.lesson_location'),'','Get lesson location return empty string');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.student_id','123');equals($1_0,'false','(Element is read only) return a string containing \'false\'');equals(this.$1_0.LMSGetLastError()==='403'||this.$1_0.LMSGetLastError()==='201',true,'An error code of \'201\' (Invalid argument error) is also acceptable in this situation, however \'403\' is preferred.');$1_0=this.$1_0.LMSSetValue('does_not_begin_with_cmi','?');equals($1_0,'false','Return a string containing \'false\'');equals(this.$1_0.LMSGetLastError()==='201'||this.$1_0.LMSGetLastError()==='401',true,'An error code of \'201\' (Invalid argument error) is also acceptable, however \'401\' is preferred.');$1_0=this.$1_0.LMSSetValue(this.$1_1(),'?');equals($1_0,'false','Return a string containing \'false\'');equals(this.$1_0.LMSGetLastError()==='201'||this.$1_0.LMSGetLastError()==='401',true,'An error code of \'201\' (Invalid argument error) is also acceptable, however \'401\' is preferred.');$1_0=this.$1_0.LMSSetValue(null,'?');equals($1_0,'false','Return a string containing \'false\'');equals(this.$1_0.LMSGetLastError()==='201'||this.$1_0.LMSGetLastError()==='401',true,'An error code of \'201\' (Invalid argument error) is also acceptable, however \'401\' is preferred.');$1_0=this.$1_0.LMSSetValue('cmi.core._children','0');equals($1_0,'false','Return a string containing \'false\'');equals(this.$1_0.LMSGetLastError()==='201'||this.$1_0.LMSGetLastError()==='403'||this.$1_0.LMSGetLastError()==='402',true,'An API Error Code of \'201\', \'403\' is also acceptable in this situation, however \'402\' is preferred');$1_0=this.$1_0.LMSSetValue('cmi.interactions._count','0');equals($1_0,'false','Return a string containing \'false\'');equals(this.$1_0.LMSGetLastError()==='201'||this.$1_0.LMSGetLastError()==='403'||this.$1_0.LMSGetLastError()==='402',true,'An API Error Code of \'201\', \'403\' is also acceptable in this situation, however \'402\' is preferred');$1_0=this.$1_0.LMSSetValue('cmi.core.score.raw','text');equals($1_0,'false','Return a string containing \'false\'');equals(this.$1_0.LMSGetLastError()==='201'||this.$1_0.LMSGetLastError()==='405',true,'An error code of \'201\' (Invalid argument error) is acceptable in this situation, however \'405\' is preferred');$1_0=this.$1_0.LMSSetValue('cmi.objectives.10.raw','100');equals($1_0,'false','Return a string containing \'false\'');equals(this.$1_0.LMSGetLastError(),'201','API Error Code \'201\' (Invalid argument error).');$1_0=this.$1_0.LMSSetValue('cmi.core.foo','?');equals($1_0,'false','Return a string containing \'false\'');equals(this.$1_0.LMSGetLastError()==='401'||this.$1_0.LMSGetLastError()==='201',true,'An error code of \'401\'(Not implemented error) is also acceptable, however \'201\' is preferred');}));test('LMSGetLastError',Delegate.create(this,function(){
equals(this.$1_0.LMSGetLastError(),'0','If no API Adapter functions are called prior to a call to LMSGetLastError (including LMSInitialize), then LMSGetLastError shall return \'0\' (No error)');this.$1_0.LMSInitialize('notempty');equals(this.$1_0.LMSGetLastError(),'201','\'201\' (Invalid argument error)');equals(this.$1_0.LMSGetLastError(),'201','Second call, still: \'201\' (Invalid argument error)');}));test('LMSGetErrorString',Delegate.create(this,function(){
equals(this.$1_0.LMSGetLastError(),'0','Initially 0 error code');equals(this.$1_0.LMSGetErrorString(this.$1_0.LMSGetLastError()),'No error','Initially - No error');equals(this.$1_0.LMSGetErrorString('0'),'No error','0 - No error');equals(this.$1_0.LMSGetErrorString('101'),'General exception','101 - General exception');equals(this.$1_0.LMSGetErrorString('201'),'Invalid argument error','201 - Invalid argument error');equals(this.$1_0.LMSGetErrorString('202'),'Element cannot have children','202 - Element cannot have children');equals(this.$1_0.LMSGetErrorString('203'),'Element not an array - cannot have count','203 - Element not an array \ufffd cannot have count');equals(this.$1_0.LMSGetErrorString('301'),'Not initialized','301 - Not initialized');equals(this.$1_0.LMSGetErrorString('401'),'Not implemented error','401 - Not implemented error');equals(this.$1_0.LMSGetErrorString('402'),'Invalid set value, element is a keyword','402 - Invalid set value, element is a keyword');equals(this.$1_0.LMSGetErrorString('403'),'Element is read only','403 - Element is read only');equals(this.$1_0.LMSGetErrorString('404'),'Element is write only','404 - Element is write only');equals(this.$1_0.LMSGetErrorString('405'),'Incorrect Data Type','405 - Incorrect Data Type');equals(this.$1_0.LMSGetErrorString('unknown'),'','Empty result');equals(this.$1_0.LMSGetErrorString(this.$1_1()),'','Empty result');equals(this.$1_0.LMSGetErrorString(null),'','Empty result');equals(this.$1_0.LMSGetLastError(),'0','Still 0 error code');}));test('LMSGetDiagnostic',Delegate.create(this,function(){
equals(this.$1_0.LMSGetLastError(),'0','Initially 0 error code');equals(this.$1_0.LMSGetDiagnostic(this.$1_0.LMSGetLastError()),'No error','Initially - No error');equals(this.$1_0.LMSGetDiagnostic(''),'No error','Initially - No error');equals(this.$1_0.LMSGetDiagnostic('0'),'No error','0 - No error');equals(this.$1_0.LMSGetDiagnostic('101'),'General exception','101 - General exception');equals(this.$1_0.LMSGetDiagnostic('201'),'Invalid argument error','201 - Invalid argument error');equals(this.$1_0.LMSGetDiagnostic('202'),'Element cannot have children','202 - Element cannot have children');equals(this.$1_0.LMSGetDiagnostic('203'),'Element not an array - cannot have count','203 - Element not an array \ufffd cannot have count');equals(this.$1_0.LMSGetDiagnostic('301'),'Not initialized','301 - Not initialized');equals(this.$1_0.LMSGetDiagnostic('401'),'Not implemented error','401 - Not implemented error');equals(this.$1_0.LMSGetDiagnostic('402'),'Invalid set value, element is a keyword','402 - Invalid set value, element is a keyword');equals(this.$1_0.LMSGetDiagnostic('403'),'Element is read only','403 - Element is read only');equals(this.$1_0.LMSGetDiagnostic('404'),'Element is write only','404 - Element is write only');equals(this.$1_0.LMSGetDiagnostic('405'),'Incorrect Data Type','405 - Incorrect Data Type');equals(this.$1_0.LMSGetDiagnostic('unknown'),'','Empty result');equals(this.$1_0.LMSGetDiagnostic(this.$1_1()),'No error','No error');equals(this.$1_0.LMSGetDiagnostic(null),'No error','No error');equals(this.$1_0.LMSGetLastError(),'0','Still 0 error code');this.$1_0.LMSInitialize('notempty');equals(this.$1_0.LMSGetLastError(),'201','\'201\' (Invalid argument error)');equals(this.$1_0.LMSGetDiagnostic(''),'Invalid argument error','Empty result');}));test('cmi.core._children',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.core._children');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.core._children');equals($1_0.indexOf('student_id')!==-1,true,'student_id in cmi.core._children');equals($1_0.indexOf('student_name')!==-1,true,'student_name in cmi.core._children');equals($1_0.indexOf('lesson_location')!==-1,true,'lesson_location in cmi.core._children');equals($1_0.indexOf('credit')!==-1,true,'credit in cmi.core._children');equals($1_0.indexOf('lesson_status')!==-1,true,'lesson_status in cmi.core._children');equals($1_0.indexOf('entry')!==-1,true,'entry in cmi.core._children');equals($1_0.indexOf('score')!==-1,true,'score in cmi.core._children');equals($1_0.indexOf('total_time')!==-1,true,'total_time in cmi.core._children');equals($1_0.indexOf('lesson_mode')!==-1,true,'lesson_mode in cmi.core._children');equals($1_0.indexOf('exit')!==-1,true,'exit in cmi.core._children');equals($1_0.indexOf('session_time')!==-1,true,'session_time in cmi.core._children');equals($1_0.split(',').length,11,'11 elements');$1_0=this.$1_0.LMSSetValue('cmi.core._children','lesson_score');equals($1_0,'false','(Element is read only) return a string containing \'false\'');equals(this.$1_0.LMSGetLastError(),'402','Element is read only');}));test('cmi.core.student_id',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.core.student_id');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.core.student_id');equals(typeof($1_0),'string','string only');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.student_id','Student1');equals($1_0,'false','(Element is read only) return a string containing \'false\'');equals(this.$1_0.LMSGetLastError(),'403','Element is read only');}));test('cmi.core.student_name',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.core.student_name');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.core.student_name');equals(typeof($1_0),'string','string only');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.student_name','Student, Mike A. Jr.');equals($1_0,'false','(Element is read only) return a string containing \'false\'');equals(this.$1_0.LMSGetLastError(),'403','Element is read only');}));test('cmi.core.lesson_location',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.core.lesson_location');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.core.lesson_location');equals(typeof($1_0),'string','string only');equals($1_0,'','Initially empty string');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.lesson_location','10');equals($1_0,'true','Set value ok');$1_0=this.$1_0.LMSGetValue('cmi.core.lesson_location');equals(typeof($1_0),'string','string only');equals($1_0,'10','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');}));test('cmi.core.credit',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.core.credit');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.core.credit');equals($1_0,'credit','Default value credit');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.credit','no-credit');equals($1_0,'false','(Element is read only) return a string containing \'false\'');equals(this.$1_0.LMSGetLastError(),'403','Element is read only');}));test('cmi.core.lesson_status',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.core.lesson_status');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.core.lesson_status');equals($1_0,'not attempted','Initiall value');equals(this.$1_0.LMSGetLastError(),'0','No Error');this.$1_0.LMSFinish('');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.core.lesson_status');equals($1_0,'completed','Finalization changed status');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.lesson_status','passed');equals($1_0,'true','Set value ok');$1_0=this.$1_0.LMSGetValue('cmi.core.lesson_status');equals($1_0,'passed','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.lesson_status','completed');equals($1_0,'true','Set value ok');$1_0=this.$1_0.LMSGetValue('cmi.core.lesson_status');equals($1_0,'completed','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.lesson_status','failed');equals($1_0,'true','Set value ok');$1_0=this.$1_0.LMSGetValue('cmi.core.lesson_status');equals($1_0,'failed','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.lesson_status','incomplete');equals($1_0,'true','Set value ok');$1_0=this.$1_0.LMSGetValue('cmi.core.lesson_status');equals($1_0,'incomplete','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.lesson_status','browsed');equals($1_0,'true','Set value ok');$1_0=this.$1_0.LMSGetValue('cmi.core.lesson_status');equals($1_0,'browsed','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.lesson_status','not attempted');equals($1_0,'false','Set value ok');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type - SCO should never set lesson_status to \'not attempted\'');$1_0=this.$1_0.LMSGetValue('cmi.core.lesson_status');equals($1_0,'browsed','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.lesson_status','success');equals($1_0,'false','Set value ok');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type - not in values list');$1_0=this.$1_0.LMSGetValue('cmi.core.lesson_status');equals($1_0,'browsed','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');}));test('cmi.core.entry',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.core.entry');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.core.entry');equals($1_0,'ab-initio','Default value');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.entry','resume');equals($1_0,'false','(Element is read only) return a string containing \'false\'');equals(this.$1_0.LMSGetLastError(),'403','Element is read only');this.$1_0.LMSFinish('');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.core.entry');equals($1_0==='resume'||$1_0==='',true,'Value must be different to default after LMSFinish');equals(this.$1_0.LMSGetLastError(),'0','No Error');}));test('cmi.core.score._children',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.core.score._children');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.core.score._children');equals($1_0.indexOf('raw')!==-1,true,'student_id in cmi.core.score._children');equals($1_0.indexOf('min')!==-1,true,'student_name in cmi.core.score._children');equals($1_0.indexOf('max')!==-1,true,'lesson_location in cmi.core.score._children');equals($1_0.split(',').length,3,'3 elements');$1_0=this.$1_0.LMSSetValue('cmi.core.score._children','lesson_score');equals($1_0,'false','(Element is read only) return a string containing \'false\'');equals(this.$1_0.LMSGetLastError(),'402','Element is read only');}));test('cmi.core.score.raw',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.core.score.raw');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');$1_0=this.$1_0.LMSSetValue('cmi.core.score.raw','0');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.core.score.raw');equals($1_0,'','Default value');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.score.raw','');equals($1_0,'false','Set value false');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type - empty string not in 0 .. 100 range');$1_0=this.$1_0.LMSGetValue('cmi.core.score.raw');equals($1_0,'','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.score.raw','1..3');equals($1_0,'false','Set value false');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type - wrong number');$1_0=this.$1_0.LMSGetValue('cmi.core.score.raw');equals($1_0,'','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.score.raw','2 3');equals($1_0,'false','Set value false');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type - wrong number');$1_0=this.$1_0.LMSGetValue('cmi.core.score.raw');equals($1_0,'','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.score.raw','-1');equals($1_0,'false','Set value false');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type - not in 0..100');$1_0=this.$1_0.LMSGetValue('cmi.core.score.raw');equals($1_0,'','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.score.raw','100.1');equals($1_0,'false','Set value false');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type - not in 0..100');$1_0=this.$1_0.LMSGetValue('cmi.core.score.raw');equals($1_0,'','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.score.raw','character');equals($1_0,'false','Set value false');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type - not in 0..100');$1_0=this.$1_0.LMSGetValue('cmi.core.score.raw');equals($1_0,'','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.score.raw','alert(\'1\')');equals($1_0,'false','Set value false');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type - not in 0..100');$1_0=this.$1_0.LMSGetValue('cmi.core.score.raw');equals($1_0,'','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.score.raw','1,2');equals($1_0,'false','Set value false');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type - wrong number');$1_0=this.$1_0.LMSGetValue('cmi.core.score.raw');equals($1_0,'','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.score.raw','1.2e+1');equals($1_0,'false','Set value false');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type - wrong CMIDecimal number');$1_0=this.$1_0.LMSGetValue('cmi.core.score.raw');equals($1_0,'','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.score.raw','1.222');equals($1_0,'false','Set value false');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type - wrong CMIDecimal number (2 digits after decimal separator)');$1_0=this.$1_0.LMSGetValue('cmi.core.score.raw');equals($1_0,'','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.score.raw','2.3');equals($1_0,'true','Set decimal value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.core.score.raw');equals($1_0,'2.3','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.score.raw','1');equals($1_0,'true','Set integer value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.core.score.raw');equals($1_0,'1','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');}));test('cmi.core.score.max',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.core.score.max');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');$1_0=this.$1_0.LMSSetValue('cmi.core.score.max','100');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.core.score.max');equals($1_0,'','Default value');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.score.max','');equals($1_0,'false','Set value false');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type - empty string not in 0 .. 100 range');$1_0=this.$1_0.LMSGetValue('cmi.core.score.max');equals($1_0,'','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.score.max','1..3');equals($1_0,'false','Set value false');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type - wrong number');$1_0=this.$1_0.LMSGetValue('cmi.core.score.max');equals($1_0,'','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.score.max','2 3');equals($1_0,'false','Set value false');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type - wrong number');$1_0=this.$1_0.LMSGetValue('cmi.core.score.max');equals($1_0,'','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.score.max','-1');equals($1_0,'false','Set value false');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type - not in 0..100');$1_0=this.$1_0.LMSGetValue('cmi.core.score.max');equals($1_0,'','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.score.max','100.1');equals($1_0,'false','Set value false');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type - not in 0..100');$1_0=this.$1_0.LMSGetValue('cmi.core.score.max');equals($1_0,'','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.score.max','character');equals($1_0,'false','Set value false');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type - not in 0..100');$1_0=this.$1_0.LMSGetValue('cmi.core.score.max');equals($1_0,'','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.score.max','alert(\'1\')');equals($1_0,'false','Set value false');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type - not in 0..100');$1_0=this.$1_0.LMSGetValue('cmi.core.score.max');equals($1_0,'','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.score.max','1,2');equals($1_0,'false','Set value false');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type - wrong number');$1_0=this.$1_0.LMSGetValue('cmi.core.score.max');equals($1_0,'','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.score.max','1.2e+1');equals($1_0,'false','Set value false');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type - wrong CMIDecimal number');$1_0=this.$1_0.LMSGetValue('cmi.core.score.max');equals($1_0,'','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.score.max','1.222');equals($1_0,'false','Set value false');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type - wrong CMIDecimal number (2 digits after decimal separator)');$1_0=this.$1_0.LMSGetValue('cmi.core.score.max');equals($1_0,'','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.score.max','2.3');equals($1_0,'true','Set decimal value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.core.score.max');equals($1_0,'2.3','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.score.max','1');equals($1_0,'true','Set integer value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.core.score.max');equals($1_0,'1','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');}));test('cmi.core.score.min',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.core.score.min');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');$1_0=this.$1_0.LMSSetValue('cmi.core.score.min','100');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.core.score.min');equals($1_0,'','Default value');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.score.min','');equals($1_0,'false','Set value false');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type - empty string not in 0 .. 100 range');$1_0=this.$1_0.LMSGetValue('cmi.core.score.min');equals($1_0,'','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.score.min','1..3');equals($1_0,'false','Set value false');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type - wrong number');$1_0=this.$1_0.LMSGetValue('cmi.core.score.min');equals($1_0,'','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.score.min','2 3');equals($1_0,'false','Set value false');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type - wrong number');$1_0=this.$1_0.LMSGetValue('cmi.core.score.min');equals($1_0,'','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.score.min','-1');equals($1_0,'false','Set value false');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type - not in 0..100');$1_0=this.$1_0.LMSGetValue('cmi.core.score.min');equals($1_0,'','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.score.min','100.1');equals($1_0,'false','Set value false');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type - not in 0..100');$1_0=this.$1_0.LMSGetValue('cmi.core.score.min');equals($1_0,'','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.score.min','character');equals($1_0,'false','Set value false');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type - not in 0..100');$1_0=this.$1_0.LMSGetValue('cmi.core.score.min');equals($1_0,'','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.score.min','alert(\'1\')');equals($1_0,'false','Set value false');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type - not in 0..100');$1_0=this.$1_0.LMSGetValue('cmi.core.score.min');equals($1_0,'','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.score.min','1,2');equals($1_0,'false','Set value false');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type - wrong number');$1_0=this.$1_0.LMSGetValue('cmi.core.score.min');equals($1_0,'','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.score.min','1.2e+1');equals($1_0,'false','Set value false');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type - wrong CMIDecimal number');$1_0=this.$1_0.LMSGetValue('cmi.core.score.min');equals($1_0,'','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.score.min','1.222');equals($1_0,'false','Set value false');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type - wrong CMIDecimal number (2 digits after decimal separator)');$1_0=this.$1_0.LMSGetValue('cmi.core.score.min');equals($1_0,'','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.score.min','2.3');equals($1_0,'true','Set decimal value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.core.score.min');equals($1_0,'2.3','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.score.min','1');equals($1_0,'true','Set integer value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.core.score.min');equals($1_0,'1','Get Value ok');equals(this.$1_0.LMSGetLastError(),'0','No Error');}));test('cmi.core.total_time',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.core.total_time');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.core.total_time');equals($1_0,'0000:00:00.00','Default value');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.total_time','0000:00:00.00');equals($1_0,'false','(Element is read only) return a string containing \'false\'');equals(this.$1_0.LMSGetLastError(),'403','Element is read only');this.$1_0.LMSSetValue('cmi.core.session_time','0000:12:30.00');equals(this.$1_0.LMSGetLastError(),'0','No Error');this.$1_0.LMSFinish('');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.core.total_time');equals(this.$1_0.LMSGetLastError(),'0','No Error');var $1_1=$1_0.split(':');equals($1_1.length,'3','time equals 1 step: size 3');ok($1_1[0]==='00'||$1_1[0]==='0000','time equals 2 step: 00 or 0000');equals($1_1[1],'12','time equals 3 step');ok($1_1[2]==='30'||$1_1[2]==='30.00','time equals 4 step: 30 or 30.00');this.$1_0.LMSSetValue('cmi.core.session_time','0000:01:30.00');equals(this.$1_0.LMSGetLastError(),'0','No Error');this.$1_0.LMSFinish('');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.core.total_time');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_1=$1_0.split(':');equals($1_1.length,'3','time equals 1 step: size 3');ok($1_1[0]==='00'||$1_1[0]==='0000','time equals 2 step: 00 or 0000');equals($1_1[1],'14','time equals 3 step');ok($1_1[2]==='00'||$1_1[2]==='00.00','time equals 4 step: 00 or 00.00');}));test('cmi.core.lesson_mode',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.core.lesson_mode');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.core.lesson_mode');equals(this.$1_0.LMSGetLastError(),'0','No Error');ok($1_0==='browse'||$1_0==='normal'||$1_0==='review','browse, normal or review expected');$1_0=this.$1_0.LMSSetValue('cmi.core.lesson_mode','browse');equals($1_0,'false','(Element is read only) return a string containing \'false\'');equals(this.$1_0.LMSGetLastError(),'403','Element is read only');}));test('cmi.core.exit',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.core.exit');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');$1_0=this.$1_0.LMSSetValue('cmi.core.exit','');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSSetValue('cmi.core.exit','not_in_vocabulary');equals($1_0,'false','accepted');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type');$1_0=this.$1_0.LMSSetValue('cmi.core.exit','time-out');equals($1_0,'true','accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');this.$1_0.LMSFinish('');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.core.entry');equals($1_0,'','empty string');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.exit','suspend');equals($1_0,'true','accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');this.$1_0.LMSFinish('');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.core.entry');equals($1_0,'resume','resume');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.exit','');equals($1_0,'true','accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');this.$1_0.LMSFinish('');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.core.entry');equals($1_0,'','empty string');equals(this.$1_0.LMSGetLastError(),'0','No Error');this.$1_0.LMSFinish('');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.core.entry');equals($1_0,'','empty string');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.core.exit');equals($1_0,'','empty string');equals(this.$1_0.LMSGetLastError(),'404','404 - Element is write only');$1_0=this.$1_0.LMSSetValue('cmi.core.exit','logout');equals($1_0,'true','accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');this.$1_0.LMSFinish('');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.core.entry');equals($1_0,'','empty string');equals(this.$1_0.LMSGetLastError(),'0','No Error');}));test('cmi.core.session_time',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.core.session_time');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');$1_0=this.$1_0.LMSSetValue('cmi.core.session_time','0000:01:01.01');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.core.session_time');equals($1_0,'','empty string');equals(this.$1_0.LMSGetLastError(),'404','404 - Element is write only');$1_0=this.$1_0.LMSSetValue('cmi.core.session_time','0000:01:01.01');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.session_time','00:02:02.02');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.session_time','00:03:03.3');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.session_time','00:04:04');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.session_time','00000:01:01');equals($1_0,'false','Not accepted');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type 205 !?');$1_0=this.$1_0.LMSSetValue('cmi.core.session_time','0000:1:01');equals($1_0,'false','Not accepted');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type 205 !?');$1_0=this.$1_0.LMSSetValue('cmi.core.session_time','0000:01:1');equals($1_0,'false','Not accepted');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type 205 !?');$1_0=this.$1_0.LMSSetValue('cmi.core.session_time','0000:01:1.');equals($1_0,'false','Not accepted');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type 205 !?');$1_0=this.$1_0.LMSSetValue('cmi.core.session_time','0000:01:1.001');equals($1_0,'false','Not accepted');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type 205 !?');$1_0=this.$1_0.LMSSetValue('cmi.core.session_time','0000:01:1.000');equals($1_0,'false','Not accepted');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type 205 !?');$1_0=this.$1_0.LMSSetValue('cmi.core.session_time','0000:01');equals($1_0,'false','Not accepted');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type 205 !?');this.$1_0.LMSFinish('');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.core.total_time');equals(this.$1_0.LMSGetLastError(),'0','No Error');var $1_1=$1_0.split(':');equals($1_1.length,'3','time equals 1 step: size 3');ok($1_1[0]==='00'||$1_1[0]==='0000','time equals 2 step: 00 or 0000');equals($1_1[1],'04','time equals 3 step');ok($1_1[2]==='04'||$1_1[2]==='04.00','time equals 4 step: 04 or 04.00');}));test('cmi.suspend_data',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.suspend_data');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');$1_0=this.$1_0.LMSSetValue('cmi.suspend_data','test');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.suspend_data');equals(this.$1_0.LMSGetLastError(),'0','No Error');equals($1_0,'','Empty string by default');$1_0=this.$1_0.LMSSetValue('cmi.suspend_data','test');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.suspend_data');equals(this.$1_0.LMSGetLastError(),'0','No Error');equals($1_0,'test','test value');this.$1_0.LMSFinish('');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.suspend_data');equals(this.$1_0.LMSGetLastError(),'0','No Error');equals($1_0,'test','test value');$1_0=this.$1_0.LMSSetValue('cmi.suspend_data',123);equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.suspend_data');equals(this.$1_0.LMSGetLastError(),'0','No Error');equals($1_0,'123','123 value');$1_0=this.$1_0.LMSSetValue('cmi.suspend_data',null);equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.suspend_data');equals(this.$1_0.LMSGetLastError(),'0','No Error');equals($1_0,'','empty value');}));test('cmi.launch_data',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.launch_data');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');$1_0=this.$1_0.LMSSetValue('cmi.launch_data','test');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.launch_data');equals(this.$1_0.LMSGetLastError(),'0','No Error');equals($1_0,'','Empty string by default if no <adlcp:datafromlms> provided');$1_0=this.$1_0.LMSSetValue('cmi.launch_data','test');equals($1_0,'false','(Element is read only) return a string containing \'false\'');equals(this.$1_0.LMSGetLastError(),'403','Element is read only');this.$1_0.LMSFinish('');var $1_1=new SCORM_1_2.ActivityTreeNode();$1_1.setDataTreeValue('cmi.launch_data','test',false);this.$1_0=new SCORM_1_2.API_LIB($1_1);this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.launch_data');equals(this.$1_0.LMSGetLastError(),'0','No Error');equals($1_0,'test','Correct value');}));test('cmi.comments',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.comments');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');$1_0=this.$1_0.LMSSetValue('cmi.comments','test');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.comments');equals(this.$1_0.LMSGetLastError(),'0','No Error');equals($1_0,'','Empty string by default');$1_0=this.$1_0.LMSSetValue('cmi.comments','test 1');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.comments');equals(this.$1_0.LMSGetLastError(),'0','No Error');equals($1_0,'test 1','test 1 - value');$1_0=this.$1_0.LMSSetValue('cmi.comments','test 2');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.comments');equals(this.$1_0.LMSGetLastError(),'0','No Error');equals($1_0.indexOf('test 1')>=0&&$1_0.indexOf('test 2')>=0,true,'test 1 and test 2 - value');this.$1_0.LMSFinish('');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSSetValue('cmi.comments','test 3');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.comments');equals(this.$1_0.LMSGetLastError(),'0','No Error');equals($1_0.indexOf('test 1')>=0&&$1_0.indexOf('test 2')>=0&&$1_0.indexOf('test 3')>=0,true,'test 1, test 2 and test 3 - value');}));test('cmi.comments_from_lms',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.comments_from_lms');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');$1_0=this.$1_0.LMSSetValue('cmi.comments_from_lms','test');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.comments_from_lms');equals(this.$1_0.LMSGetLastError(),'0','No Error');equals($1_0,'','Empty string by default if no provided by LMS');$1_0=this.$1_0.LMSSetValue('cmi.comments_from_lms','test');equals($1_0,'false','(Element is read only) return a string containing \'false\'');equals(this.$1_0.LMSGetLastError(),'403','Element is read only');}));test('cmi.objectives._children',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.objectives._children');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');$1_0=this.$1_0.LMSSetValue('cmi.objectives._children','id');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.objectives._children');equals($1_0.indexOf('id')!==-1,true,'id in cmi.objectives._children');equals($1_0.indexOf('score')!==-1,true,'score in cmi.objectives._children');equals($1_0.indexOf('status')!==-1,true,'status in cmi.objectives._children');equals($1_0.split(',').length,3,'3 elements');$1_0=this.$1_0.LMSSetValue('cmi.objectives._children','id');equals($1_0,'false','(Element is read only) return a string containing \'false\'');equals(this.$1_0.LMSGetLastError(),'402','Element is read only');}));test('cmi.objectives._count',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.objectives._count');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');$1_0=this.$1_0.LMSSetValue('cmi.objectives._count','0');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.objectives._count');equals($1_0,'0','0 - by default');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.objectives._count','0');equals($1_0,'false','(Element is read only) return a string containing \'false\'');equals(this.$1_0.LMSGetLastError(),'402','Element is read only');}));test('cmi.objectives.n.id',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.objectives.0.id');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');$1_0=this.$1_0.LMSSetValue('cmi.objectives.0.id','0');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.objectives.0.id');equals($1_0,'','empty by default - id not setted yet');equals(this.$1_0.LMSGetLastError(),'201','201 - Invalid argument error');$1_0=this.$1_0.LMSSetValue('cmi.objectives.100.id','A1317');equals($1_0,'false','Rejected');equals(this.$1_0.LMSGetLastError(),'201','201 - Invalid argument error');$1_0=this.$1_0.LMSSetValue('cmi.objectives.0.id','A 1317');equals($1_0,'false','Rejected');equals(this.$1_0.LMSGetLastError(),'405','405 - Incorrect Data Type - space in value');$1_0=this.$1_0.LMSSetValue('cmi.objectives.0.id','A#1317');equals($1_0,'false','Rejected');equals(this.$1_0.LMSGetLastError(),'405','405 - Incorrect Data Type - not alpha-numeric');$1_0=this.$1_0.LMSSetValue('cmi.objectives.0.id','A1317');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.objectives.0.id');equals($1_0,'A1317','Correct');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.objectives._count');equals($1_0,'1','1 value presented');equals(this.$1_0.LMSGetLastError(),'0','No Error');this.$1_0.LMSFinish('');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.objectives._count');equals($1_0,'1','1 value presented');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.objectives.0.id');equals($1_0,'A1317','Correct');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.objectives.0.id','B1317');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.objectives._count');equals($1_0,'1','1 value presented');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.objectives.0.id');equals($1_0,'B1317','Correct - overwrited');equals(this.$1_0.LMSGetLastError(),'0','No Error');}));test('cmi.objectives.n.score._children',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.objectives.0.score._children');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');$1_0=this.$1_0.LMSSetValue('cmi.objectives.0.score._children','0');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.objectives.0.score._children');equals($1_0,'','empty - Invalid argument error');equals(this.$1_0.LMSGetLastError(),'201','201 - Invalid argument error');$1_0=this.$1_0.LMSSetValue('cmi.objectives.0.id','Obj123');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.objectives.0.score._children');equals(this.$1_0.LMSGetLastError(),'0','No Error');equals($1_0.indexOf('raw')!==-1,true,'raw in cmi.objectives.n.score._children');equals($1_0.indexOf('min')!==-1,true,'min in cmi.objectives.n.score._children');equals($1_0.indexOf('max')!==-1,true,'max in cmi.objectives.n.score._children');equals($1_0.split(',').length,3,'3 elements');$1_0=this.$1_0.LMSSetValue('cmi.objectives.0.score._children','raw');equals($1_0,'false','(Element is read only) return a string containing \'false\'');equals(this.$1_0.LMSGetLastError(),'402','Element is read only');}));test('cmi.objectives.n.score.raw',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.objectives.0.score.raw');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');$1_0=this.$1_0.LMSSetValue('cmi.objectives.0.score.raw','0');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.objectives.0.score.raw');equals($1_0,'','empty - Invalid argument error');equals(this.$1_0.LMSGetLastError(),'201','201 - Invalid argument error');$1_0=this.$1_0.LMSSetValue('cmi.objectives.0.score.raw','-1');equals($1_0,'false','Rejected');equals(this.$1_0.LMSGetLastError(),'405','405 - Incorrect Data Type (0..100)');$1_0=this.$1_0.LMSSetValue('cmi.objectives.0.score.raw','100.1');equals($1_0,'false','Rejected');equals(this.$1_0.LMSGetLastError(),'405','405 - Incorrect Data Type (0..100)');$1_0=this.$1_0.LMSSetValue('cmi.objectives.0.score.raw','99.111');equals($1_0,'false','Rejected');equals(this.$1_0.LMSGetLastError(),'405','405 - Incorrect Data Type (0..100)');$1_0=this.$1_0.LMSSetValue('cmi.objectives.0.score.raw','test');equals($1_0,'false','Rejected');equals(this.$1_0.LMSGetLastError(),'405','405 - Incorrect Data Type (0..100)');$1_0=this.$1_0.LMSSetValue('cmi.objectives.0.score.raw','');equals($1_0,'false','Rejected');equals(this.$1_0.LMSGetLastError(),'405','405 - Incorrect Data Type (0..100)');$1_0=this.$1_0.LMSSetValue('cmi.objectives.0.score.raw','100');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.objectives.0.score.raw');equals($1_0,'100','Correct - overwrited');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.objectives._count');equals($1_0,'1','1 value presented');equals(this.$1_0.LMSGetLastError(),'0','No Error');this.$1_0.LMSFinish('');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.objectives.0.score.raw');equals($1_0,'100','Correct - overwrited');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.objectives._count');equals($1_0,'1','1 value presented');equals(this.$1_0.LMSGetLastError(),'0','No Error');}));test('cmi.objectives.n.score.max',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.objectives.0.score.max');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');$1_0=this.$1_0.LMSSetValue('cmi.objectives.0.score.max','0');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.objectives.0.score.max');equals($1_0,'','empty - Invalid argument error');equals(this.$1_0.LMSGetLastError(),'201','201 - Invalid argument error');$1_0=this.$1_0.LMSSetValue('cmi.objectives.0.score.max','-1');equals($1_0,'false','Rejected');equals(this.$1_0.LMSGetLastError(),'405','405 - Incorrect Data Type (0..100)');$1_0=this.$1_0.LMSSetValue('cmi.objectives.0.score.max','100.1');equals($1_0,'false','Rejected');equals(this.$1_0.LMSGetLastError(),'405','405 - Incorrect Data Type (0..100)');$1_0=this.$1_0.LMSSetValue('cmi.objectives.0.score.max','99.111');equals($1_0,'false','Rejected');equals(this.$1_0.LMSGetLastError(),'405','405 - Incorrect Data Type (0..100)');$1_0=this.$1_0.LMSSetValue('cmi.objectives.0.score.max','test');equals($1_0,'false','Rejected');equals(this.$1_0.LMSGetLastError(),'405','405 - Incorrect Data Type (0..100)');$1_0=this.$1_0.LMSSetValue('cmi.objectives.0.score.max','');equals($1_0,'false','Rejected');equals(this.$1_0.LMSGetLastError(),'405','405 - Incorrect Data Type (0..100)');$1_0=this.$1_0.LMSSetValue('cmi.objectives.0.score.max','100');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.objectives.0.score.max');equals($1_0,'100','Correct - overwrited');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.objectives._count');equals($1_0,'1','1 value presented');equals(this.$1_0.LMSGetLastError(),'0','No Error');this.$1_0.LMSFinish('');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.objectives.0.score.max');equals($1_0,'100','Correct - overwrited');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.objectives._count');equals($1_0,'1','1 value presented');equals(this.$1_0.LMSGetLastError(),'0','No Error');}));test('cmi.objectives.n.score.min',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.objectives.0.score.min');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');$1_0=this.$1_0.LMSSetValue('cmi.objectives.0.score.min','0');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.objectives.0.score.min');equals($1_0,'','empty - Invalid argument error');equals(this.$1_0.LMSGetLastError(),'201','201 - Invalid argument error');$1_0=this.$1_0.LMSSetValue('cmi.objectives.0.score.min','-1');equals($1_0,'false','Rejected');equals(this.$1_0.LMSGetLastError(),'405','405 - Incorrect Data Type (0..100)');$1_0=this.$1_0.LMSSetValue('cmi.objectives.0.score.min','100.1');equals($1_0,'false','Rejected');equals(this.$1_0.LMSGetLastError(),'405','405 - Incorrect Data Type (0..100)');$1_0=this.$1_0.LMSSetValue('cmi.objectives.0.score.min','99.111');equals($1_0,'false','Rejected');equals(this.$1_0.LMSGetLastError(),'405','405 - Incorrect Data Type (0..100)');$1_0=this.$1_0.LMSSetValue('cmi.objectives.0.score.min','test');equals($1_0,'false','Rejected');equals(this.$1_0.LMSGetLastError(),'405','405 - Incorrect Data Type (0..100)');$1_0=this.$1_0.LMSSetValue('cmi.objectives.0.score.min','');equals($1_0,'false','Rejected');equals(this.$1_0.LMSGetLastError(),'405','405 - Incorrect Data Type (0..100)');$1_0=this.$1_0.LMSSetValue('cmi.objectives.0.score.min','100');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.objectives.0.score.min');equals($1_0,'100','Correct - overwrited');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.objectives._count');equals($1_0,'1','1 value presented');equals(this.$1_0.LMSGetLastError(),'0','No Error');this.$1_0.LMSFinish('');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.objectives.0.score.min');equals($1_0,'100','Correct - overwrited');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.objectives._count');equals($1_0,'1','1 value presented');equals(this.$1_0.LMSGetLastError(),'0','No Error');}));test('cmi.objectives.n.status',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.objectives.0.status');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');$1_0=this.$1_0.LMSSetValue('cmi.objectives.0.status','passed');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.objectives.0.status');equals($1_0,'','empty - Invalid argument error');equals(this.$1_0.LMSGetLastError(),'201','201 - Invalid argument error');$1_0=this.$1_0.LMSSetValue('cmi.objectives.0.status','not_in_vocabulary');equals($1_0,'false','Rejected');equals(this.$1_0.LMSGetLastError(),'405','405 - Incorrect Data Type (not in vocabulary)');$1_0=this.$1_0.LMSSetValue('cmi.objectives.0.id','A1317');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.objectives.0.status');equals($1_0,'not attempted','not attempted - default value');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.objectives.0.status','passed');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.objectives.0.status');equals($1_0,'passed','Correct value');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.objectives.0.status','completed');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.objectives.0.status');equals($1_0,'completed','Correct value');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.objectives.0.status','failed');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.objectives.0.status');equals($1_0,'failed','Correct value');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.objectives.0.status','incomplete');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.objectives.0.status');equals($1_0,'incomplete','Correct value');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.objectives.0.status','not attempted');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.objectives.0.status');equals($1_0,'not attempted','Correct value');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.objectives.0.status','browsed');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.objectives.0.status');equals($1_0,'browsed','Correct value');equals(this.$1_0.LMSGetLastError(),'0','No Error');this.$1_0.LMSFinish('');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.objectives.0.status');equals($1_0,'browsed','Correct value - not equals to default');equals(this.$1_0.LMSGetLastError(),'0','No Error');}));test('cmi.student_data._children',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.student_data._children');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');$1_0=this.$1_0.LMSSetValue('cmi.student_data._children','id');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.student_data._children');equals($1_0.indexOf('mastery_score')!==-1,true,'mastery_score in cmi.student_data._children');equals($1_0.indexOf('time_limit_action')!==-1,true,'time_limit_action in cmi.student_data._children');equals($1_0.indexOf('max_time_allowed')!==-1,true,'max_time_allowed in cmi.student_data._children');equals($1_0.split(',').length,3,'3 elements');$1_0=this.$1_0.LMSSetValue('cmi.student_data._children','id');equals($1_0,'false','(Element is read only) return a string containing \'false\'');equals(this.$1_0.LMSGetLastError(),'402','Element is read only');}));test('cmi.student_data.mastery_score',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.student_data.mastery_score');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');$1_0=this.$1_0.LMSSetValue('cmi.student_data.mastery_score','100');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.student_data.mastery_score');equals(this.$1_0.LMSGetLastError(),'0','No Error');equals($1_0,'','Empty string by default if no <adlcp:masteryscore> provided');$1_0=this.$1_0.LMSSetValue('cmi.student_data.mastery_score','100');equals($1_0,'false','(Element is read only) return a string containing \'false\'');equals(this.$1_0.LMSGetLastError(),'403','Element is read only');this.$1_0.LMSFinish('');var $1_1=new SCORM_1_2.ActivityTreeNode();$1_1.setDataTreeValue('cmi.student_data.mastery_score','80',false);this.$1_0=new SCORM_1_2.API_LIB($1_1);this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.student_data.mastery_score');equals(this.$1_0.LMSGetLastError(),'0','No Error');equals($1_0,'80','Correct value');$1_0=this.$1_0.LMSSetValue('cmi.core.score.raw','79');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.core.lesson_status');equals($1_0,'not attempted','Initiall value');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.core.lesson_mode');equals($1_0,'normal','Expected \'normal\'');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.core.credit');equals($1_0,'credit','Expected \'credit\'');equals(this.$1_0.LMSGetLastError(),'0','No Error');this.$1_0.LMSFinish('');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.core.lesson_status');equals($1_0,'failed','aafailed - Expected value');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.score.raw','80');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.lesson_status','completed');equals(this.$1_0.LMSGetLastError(),'0','No Error');this.$1_0.LMSCommit('');equals(this.$1_0.LMSGetLastError(),'0','No Error with Commit');$1_0=this.$1_0.LMSGetValue('cmi.core.lesson_status');equals($1_0,'completed','completed - Expected value');equals(this.$1_0.LMSGetLastError(),'0','No Error');this.$1_0.LMSFinish('');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.core.lesson_status');equals($1_0,'passed','passed - Expected value');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.score.raw','80');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_1=new SCORM_1_2.ActivityTreeNode();$1_1.setDataTreeValue('cmi.student_data.mastery_score','80',false);$1_1.setDataTreeValue('cmi.core.lesson_mode','browse',false);this.$1_0=new SCORM_1_2.API_LIB($1_1);this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.core.lesson_mode');equals($1_0,'browse','Expected \'browse\'');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.core.lesson_status');equals($1_0,'not attempted','not attempted - Expected initial value');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.core.score.raw','80');equals(this.$1_0.LMSGetLastError(),'0','No Error');this.$1_0.LMSFinish('');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.core.lesson_mode');equals($1_0,'browse','Expected \'browse\'');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.core.lesson_status');equals($1_0,'browsed','Expected \'browsed\'');equals(this.$1_0.LMSGetLastError(),'0','No Error');}));test('cmi.student_data.max_time_allowed',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.student_data.max_time_allowed');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');$1_0=this.$1_0.LMSSetValue('cmi.student_data.max_time_allowed','00:14:30');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.student_data.max_time_allowed');equals(this.$1_0.LMSGetLastError(),'0','No Error');equals($1_0,'','Empty string by default if no <adlcp:maxtimeallowed> provided');$1_0=this.$1_0.LMSSetValue('cmi.student_data.max_time_allowed','00:14:30');equals($1_0,'false','(Element is read only) return a string containing \'false\'');equals(this.$1_0.LMSGetLastError(),'403','Element is read only');this.$1_0.LMSFinish('');var $1_1=new SCORM_1_2.ActivityTreeNode();$1_1.setDataTreeValue('cmi.student_data.max_time_allowed','00:14:30',false);this.$1_0=new SCORM_1_2.API_LIB($1_1);this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.student_data.max_time_allowed');equals(this.$1_0.LMSGetLastError(),'0','No Error');var $1_2=$1_0.split(':');equals($1_2.length,'3','time equals 1 step: size 3');ok($1_2[0]==='00'||$1_2[0]==='0000','time equals 2 step: 00 or 0000');equals($1_2[1],'14','time equals 3 step');ok($1_2[2]==='30'||$1_2[2]==='30.00','time equals 4 step: 30 or 30.00');}));test('cmi.student_data.time_limit_action',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.student_data.time_limit_action');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');$1_0=this.$1_0.LMSSetValue('cmi.student_data.time_limit_action','continue,message');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.student_data.time_limit_action');equals(this.$1_0.LMSGetLastError(),'0','No Error');equals($1_0,'continue,no message','\'continue,no message\' by default if no <adlcp:timelimitaction> provided');$1_0=this.$1_0.LMSSetValue('cmi.student_data.time_limit_action','continue,message');equals($1_0,'false','(Element is read only) return a string containing \'false\'');equals(this.$1_0.LMSGetLastError(),'403','Element is read only');this.$1_0.LMSFinish('');var $1_1=new SCORM_1_2.ActivityTreeNode();$1_1.setDataTreeValue('cmi.student_data.time_limit_action','continue,message',false);this.$1_0=new SCORM_1_2.API_LIB($1_1);this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.student_data.time_limit_action');equals(this.$1_0.LMSGetLastError(),'0','No Error');equals($1_0,'continue,message','\'continue,message\' - correct value');}));test('cmi.student_preference._children',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.student_preference._children');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');$1_0=this.$1_0.LMSSetValue('cmi.student_preference._children','audio');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.student_preference._children');equals($1_0.indexOf('audio')!==-1,true,'audio in cmi.student_preference._children');equals($1_0.indexOf('language')!==-1,true,'language in cmi.student_preference._children');equals($1_0.indexOf('speed')!==-1,true,'speed in cmi.student_preference._children');equals($1_0.indexOf('text')!==-1,true,'text in cmi.student_preference._children');equals($1_0.split(',').length,4,'4 elements');$1_0=this.$1_0.LMSSetValue('cmi.student_preference._children','id');equals($1_0,'false','(Element is read only) return a string containing \'false\'');equals(this.$1_0.LMSGetLastError(),'402','Element is read only');}));test('cmi.student_preference.audio',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.student_preference.audio');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');$1_0=this.$1_0.LMSSetValue('cmi.student_preference.audio','0');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.student_preference.audio');equals(this.$1_0.LMSGetLastError(),'0','No Error');equals($1_0,'0','\'0\' by default');$1_0=this.$1_0.LMSSetValue('cmi.student_preference.audio','1.3');equals($1_0,'false','Rejected');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type (CMISInteger)');$1_0=this.$1_0.LMSSetValue('cmi.student_preference.audio','101');equals($1_0,'false','Rejected');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type (-1 .. 100)');$1_0=this.$1_0.LMSSetValue('cmi.student_preference.audio','-2');equals($1_0,'false','Rejected');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type (-1 .. 100)');$1_0=this.$1_0.LMSSetValue('cmi.student_preference.audio','1');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.student_preference.audio');equals(this.$1_0.LMSGetLastError(),'0','No Error');equals($1_0,'1','\'1\' - correct value');}));test('cmi.student_preference.language',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.student_preference.language');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');$1_0=this.$1_0.LMSSetValue('cmi.student_preference.language','English');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.student_preference.language');equals(this.$1_0.LMSGetLastError(),'0','No Error');equals($1_0,'','Empty string by default');$1_0=this.$1_0.LMSSetValue('cmi.student_preference.language','English 123');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.student_preference.language');equals(this.$1_0.LMSGetLastError(),'0','No Error');equals($1_0,'English 123','\'English 123\' - correct value');}));test('cmi.student_preference.speed',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.student_preference.speed');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');$1_0=this.$1_0.LMSSetValue('cmi.student_preference.speed','0');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.student_preference.speed');equals(this.$1_0.LMSGetLastError(),'0','No Error');equals($1_0,'0','\'0\' by default');$1_0=this.$1_0.LMSSetValue('cmi.student_preference.speed','1.3');equals($1_0,'false','Rejected');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type (CMISInteger)');$1_0=this.$1_0.LMSSetValue('cmi.student_preference.speed','101');equals($1_0,'false','Rejected');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type (-100 .. 100)');$1_0=this.$1_0.LMSSetValue('cmi.student_preference.speed','-101');equals($1_0,'false','Rejected');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type (-100 .. 100)');$1_0=this.$1_0.LMSSetValue('cmi.student_preference.speed','1');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.student_preference.speed');equals(this.$1_0.LMSGetLastError(),'0','No Error');equals($1_0,'1','\'1\' - correct value');}));test('cmi.student_preference.text',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.student_preference.text');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');$1_0=this.$1_0.LMSSetValue('cmi.student_preference.text','0');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.student_preference.text');equals(this.$1_0.LMSGetLastError(),'0','No Error');equals($1_0,'0','\'0\' by default');$1_0=this.$1_0.LMSSetValue('cmi.student_preference.text','0.3');equals($1_0,'false','Rejected');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type (CMISInteger)');$1_0=this.$1_0.LMSSetValue('cmi.student_preference.text','2');equals($1_0,'false','Rejected');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type (-1 .. 1)');$1_0=this.$1_0.LMSSetValue('cmi.student_preference.text','-2');equals($1_0,'false','Rejected');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type (-1 .. 1)');$1_0=this.$1_0.LMSSetValue('cmi.student_preference.text','1');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.student_preference.text');equals(this.$1_0.LMSGetLastError(),'0','No Error');equals($1_0,'1','\'1\' - correct value');}));test('cmi.interactions._children',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.interactions._children');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');$1_0=this.$1_0.LMSSetValue('cmi.interactions._children','id');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.interactions._children');equals($1_0.indexOf('id')!==-1,true,'id in cmi.interactions._children');equals($1_0.indexOf('objectives')!==-1,true,'objectives in cmi.interactions._children');equals($1_0.indexOf('time')!==-1,true,'time in cmi.interactions._children');equals($1_0.indexOf('type')!==-1,true,'type in cmi.interactions._children');equals($1_0.indexOf('correct_responses')!==-1,true,'correct_responses in cmi.interactions._children');equals($1_0.indexOf('weighting')!==-1,true,'weighting in cmi.interactions._children');equals($1_0.indexOf('student_response')!==-1,true,'student_response in cmi.interactions._children');equals($1_0.indexOf('result')!==-1,true,'result in cmi.interactions._children');equals($1_0.indexOf('latency')!==-1,true,'latency in cmi.interactions._children');equals($1_0.split(',').length,9,'9 elements');$1_0=this.$1_0.LMSSetValue('cmi.interactions._children','id');equals($1_0,'false','(Element is read only) return a string containing \'false\'');equals(this.$1_0.LMSGetLastError(),'402','Element is read only');}));test('cmi.interactions._count',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.interactions._count');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');$1_0=this.$1_0.LMSSetValue('cmi.interactions._count','0');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.interactions._count');equals($1_0,'0','0 - by default');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.interactions._count','0');equals($1_0,'false','(Element is read only) return a string containing \'false\'');equals(this.$1_0.LMSGetLastError(),'402','Element is read only');}));test('cmi.interactions.n.id',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.interactions.0.id');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.id','0');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.interactions.0.id');equals($1_0,'','empty - if error');equals(this.$1_0.LMSGetLastError(),'404','404 - Element is write only');$1_0=this.$1_0.LMSSetValue('cmi.interactions.100.id','A1317');equals($1_0,'false','Rejected');equals(this.$1_0.LMSGetLastError(),'201','201 - Invalid argument error');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.id','A 1317');equals($1_0,'false','Rejected');equals(this.$1_0.LMSGetLastError(),'405','405 - Incorrect Data Type - space in value');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.id','A#1317');equals($1_0,'false','Rejected');equals(this.$1_0.LMSGetLastError(),'405','405 - Incorrect Data Type - not alpha-numeric');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.id','I_001');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.interactions.0.id');equals($1_0,'','empty - read only element');equals(this.$1_0.LMSGetLastError(),'404','404 - Element is write only');$1_0=this.$1_0.LMSGetValue('cmi.interactions._count');equals($1_0,'1','1 value presented');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.interactions.0.objectives._count');equals($1_0,'0','0 value presented');equals(this.$1_0.LMSGetLastError(),'0','No Error');this.$1_0.LMSFinish('');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.interactions._count');equals($1_0,'1','1 value presented');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.id','B1317');equals($1_0,'true','new value accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.interactions._count');equals($1_0,'1','1 value presented');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.interactions.1.id','I_002');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.interactions._count');equals($1_0,'2','2 value presented');equals(this.$1_0.LMSGetLastError(),'0','No Error');}));test('cmi.interactions.n.objectives._count',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.interactions.0.objectives._count');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.objectives._count','0');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.interactions.0.objectives._count');equals($1_0,'','empty if error');equals(this.$1_0.LMSGetLastError(),'201','201 - Invalid argument error');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.objectives._count','0');equals($1_0,'false','(Element is read only) return a string containing \'false\'');equals(this.$1_0.LMSGetLastError(),'402','Element is read only');}));test('cmi.interactions.n.objectives.n.id',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.interactions.0.objectives.0.id');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.objectives.0.id','A1333');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.interactions.0.objectives.0.id');equals($1_0,'','empty - if error');equals(this.$1_0.LMSGetLastError(),'404','404 - Element is write only');$1_0=this.$1_0.LMSSetValue('cmi.interactions.100.objectives.0.id','A1317');equals($1_0,'false','Rejected');equals(this.$1_0.LMSGetLastError(),'201','201 - Invalid argument error');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.objectives.100.id','A1317');equals($1_0,'false','Rejected');equals(this.$1_0.LMSGetLastError(),'201','201 - Invalid argument error');$1_0=this.$1_0.LMSGetValue('cmi.interactions._count');equals($1_0,'0','0 value presented');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.objectives.0.id','A 1317');equals($1_0,'false','Rejected');equals(this.$1_0.LMSGetLastError(),'405','405 - Incorrect Data Type - space in value');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.objectives.0.id','A#1317');equals($1_0,'false','Rejected');equals(this.$1_0.LMSGetLastError(),'405','405 - Incorrect Data Type - not alpha-numeric');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.objectives.0.id','Obj123');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.interactions._count');equals($1_0,'1','1 value presented');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.interactions.0.objectives._count');equals($1_0,'1','1 value presented');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.interactions.0.objectives.0.id');equals($1_0,'','empty - read only element');equals(this.$1_0.LMSGetLastError(),'404','404 - Element is write only');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.objectives.100.id','A1317');equals($1_0,'false','Rejected');equals(this.$1_0.LMSGetLastError(),'201','201 - Invalid argument error');$1_0=this.$1_0.LMSGetValue('cmi.interactions._count');equals($1_0,'1','1 value presented');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.interactions.0.objectives._count');equals($1_0,'1','1 value presented');equals(this.$1_0.LMSGetLastError(),'0','No Error');this.$1_0.LMSFinish('');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.interactions._count');equals($1_0,'1','1 value presented');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.interactions.0.objectives._count');equals($1_0,'1','1 value presented');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.objectives.0.id','B1317');equals($1_0,'true','new value accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.interactions.0.objectives._count');equals($1_0,'1','1 value presented');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.objectives.1.id','IO_002');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.interactions._count');equals($1_0,'1','1 value presented');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.interactions.0.objectives._count');equals($1_0,'2','2 value presented');equals(this.$1_0.LMSGetLastError(),'0','No Error');}));test('cmi.interactions.n.time',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.interactions.0.time');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.time','12:33:35.5');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.interactions.0.time');equals($1_0,'','empty - if error');equals(this.$1_0.LMSGetLastError(),'404','404 - Element is write only');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.time','0000:01:01.01');equals($1_0,'false','Not accepted');equals(this.$1_0.LMSGetLastError(),'405','Two digits hours. Incorrect Data Type 205 !?');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.time','00000:01:01');equals($1_0,'false','Not accepted');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type 205 !?');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.time','00:02:02.02');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.interactions._count');equals($1_0,'1','1 value presented');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.time','00:03:03.3');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.time','00:04:04');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.time','00:1:01');equals($1_0,'false','Not accepted');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type 205 !?');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.time','00:01:1');equals($1_0,'false','Not accepted');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type 205 !?');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.time','00:01:1.');equals($1_0,'false','Not accepted');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type 205 !?');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.time','00:01:1.001');equals($1_0,'false','Not accepted');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type 205 !?');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.time','00:01:1.000');equals($1_0,'false','Not accepted');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type 205 !?');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.time','00:01');equals($1_0,'false','Not accepted');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type 205 !?');$1_0=this.$1_0.LMSGetValue('cmi.interactions._count');equals($1_0,'1','1 value presented');equals(this.$1_0.LMSGetLastError(),'0','No Error');}));test('cmi.interactions.n.type',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.interactions.0.type');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.type','true-false');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.interactions.0.type');equals($1_0,'','empty - if error');equals(this.$1_0.LMSGetLastError(),'404','404 - Element is write only');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.type','not_in_vocabulary');equals($1_0,'false','Not accepted');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type 205 !?');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.type','true-false');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.type','choice');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.type','fill-in');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.type','matching');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.type','performance');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.type','sequencing');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.type','likert');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.type','numeric');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');}));test('cmi.interactions.n.correct_responses._count',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.interactions.0.correct_responses._count');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.correct_responses._count','0');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.interactions.0.correct_responses._count');equals($1_0,'','empty if error');equals(this.$1_0.LMSGetLastError(),'201','201 - Invalid argument error');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.correct_responses._count','0');equals($1_0,'false','(Element is read only) return a string containing \'false\'');equals(this.$1_0.LMSGetLastError(),'402','Element is read only');}));test('cmi.interactions.n.correct_responses.n.pattern',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.interactions.0.correct_responses.0.pattern');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.correct_responses.0.pattern','0');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.interactions.0.correct_responses.0.pattern');equals($1_0,'','empty - if error');equals(this.$1_0.LMSGetLastError(),'404','404 - Element is write only');$1_0=this.$1_0.LMSGetValue('cmi.interactions._count');equals($1_0,'0','0 value presented');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.correct_responses.0.pattern','true');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.interactions._count');equals($1_0,'1','1 value presented');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.interactions.0.correct_responses._count');equals($1_0,'1','1 value presented');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.correct_responses.1.pattern','false');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.interactions._count');equals($1_0,'1','1 value presented');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.interactions.0.correct_responses._count');equals($1_0,'2','2 value presented');equals(this.$1_0.LMSGetLastError(),'0','No Error');this.$1_0.LMSFinish('');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.interactions._count');equals($1_0,'1','1 value presented');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.interactions.0.correct_responses._count');equals($1_0,'2','2 value presented');equals(this.$1_0.LMSGetLastError(),'0','No Error');}));test('cmi.interactions.n.weighting',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.interactions.0.weighting');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.weighting','1');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.interactions.0.weighting');equals($1_0,'','empty - if error');equals(this.$1_0.LMSGetLastError(),'404','404 - Element is write only');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.weighting','char');equals($1_0,'false','Not accepted');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type 205 !?');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.weighting','1.2.3');equals($1_0,'false','Not accepted');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type 205 !?');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.weighting','0.66');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');}));test('cmi.interactions.n.student_response',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.interactions.0.student_response');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.student_response','0');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.interactions.0.student_response');equals($1_0,'','empty - if error');equals(this.$1_0.LMSGetLastError(),'404','404 - Element is write only');$1_0=this.$1_0.LMSGetValue('cmi.interactions._count');equals($1_0,'0','0 value presented');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.student_response','0');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.interactions._count');equals($1_0,'1','1 value presented');equals(this.$1_0.LMSGetLastError(),'0','No Error');}));test('cmi.interactions.n.result',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.interactions.0.result');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.result','correct');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.interactions.0.result');equals($1_0,'','empty - if error');equals(this.$1_0.LMSGetLastError(),'404','404 - Element is write only');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.result','not_in_vocabulary');equals($1_0,'false','Not accepted');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type 205 !?');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.result','correct');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.result','wrong');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.result','unanticipated');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.result','neutral');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.result','1.2');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.result','2.1');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.result','2.12');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.result','2.123');equals($1_0,'false','Not accepted');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type 205 !?');}));test('cmi.interactions.n.latency',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('cmi.interactions.0.latency');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.latency','12:33:35.5');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('cmi.interactions.0.latency');equals($1_0,'','empty - if error');equals(this.$1_0.LMSGetLastError(),'404','404 - Element is write only');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.latency','0000:01:01.01');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.latency','00000:01:01');equals($1_0,'false','Not accepted');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.latency','00:02:02.02');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSGetValue('cmi.interactions._count');equals($1_0,'1','1 value presented');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.latency','00:03:03.3');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.latency','00:04:04');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.latency','00:1:01');equals($1_0,'false','Not accepted');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.latency','00:01:1');equals($1_0,'false','Not accepted');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.latency','00:01:1.');equals($1_0,'false','Not accepted');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.latency','00:01:1.001');equals($1_0,'false','Not accepted');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.latency','00:01:1.000');equals($1_0,'false','Not accepted');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type');$1_0=this.$1_0.LMSSetValue('cmi.interactions.0.latency','00:01');equals($1_0,'false','Not accepted');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type');$1_0=this.$1_0.LMSGetValue('cmi.interactions._count');equals($1_0,'1','1 value presented');equals(this.$1_0.LMSGetLastError(),'0','No Error');}));test('nav.event',Delegate.create(this,function(){
var $1_0=this.$1_0.LMSGetValue('nav.event');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');$1_0=this.$1_0.LMSSetValue('nav.event','continue');equals($1_0,'','Shall not succeed and return empty string, SCO previously not called LMSInitialize ');equals(this.$1_0.LMSGetLastError(),'301','\'301\' (Not initialized)');this.$1_0.LMSInitialize('');$1_0=this.$1_0.LMSGetValue('nav.event');equals($1_0,'','empty - if error');equals(this.$1_0.LMSGetLastError(),'404','404 - Element is write only');$1_0=this.$1_0.LMSSetValue('nav.event','jumpto');equals($1_0,'false','Rejected');equals(this.$1_0.LMSGetLastError(),'405','Incorrect Data Type');$1_0=this.$1_0.LMSSetValue('nav.event','previous');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');$1_0=this.$1_0.LMSSetValue('nav.event','continue');equals($1_0,'true','Accepted');equals(this.$1_0.LMSGetLastError(),'0','No Error');}));}}
TestAPI.TestActivityTree=function(){TestAPI.TestActivityTree.constructBase(this);}
TestAPI.TestActivityTree.prototype={$1_0:null,setup:function(){this.$1_0=new SCORM_1_2.ActivityTree('Org1',null,false);},teardown:function(){this.$1_0=null;},tests:function(){test('ActivityTreeNode',Delegate.create(this,function(){
var $1_0=this.$1_0.addNode('Organization 1','Org1',null,null,true);equals(this.$1_0.getChildrensCount(),1,'One organization');ok(this.$1_0.getOrganization()===$1_0,'Correct Default organization');var $1_1=$1_0.addNode('Title 1','Identifier1','url1','sco',true);var $1_2=$1_0.addNode('Title 2','Identifier2',null,'asset',true);var $1_3=$1_2.addNode('Title 3','Identifier3','url2','sco',true);var $1_4=$1_2.addNode('Title 4','Identifier4',null,'asset',true);var $1_5=$1_4.addNode('Title 5','Identifier5',null,'asset',true);var $1_6=$1_5.addNode('Title 6','Identifier6','url3','sco',true);var $1_7=$1_0.addNode('Title 5','Identifier5','url4','sco',true);ok(!isNullOrUndefined($1_1),'item1 presented');ok(!isNullOrUndefined($1_2),'item2 presented');ok(!isNullOrUndefined($1_3),'item3 presented');ok(!isNullOrUndefined($1_4),'item4 presented');ok(!isNullOrUndefined($1_5),'item5 presented');ok(!isNullOrUndefined($1_6),'item5 presented');ok(!isNullOrUndefined($1_7),'item5 presented');equals($1_0.getChildrensCount(),3,'3 childrens in organization');equals($1_1.getChildrensCount(),0,'0 childrens in item1');equals($1_2.getChildrensCount(),2,'2 childrens in item2');equals($1_4.getChildrensCount(),1,'1 childrens in item4');equals($1_5.getChildrensCount(),1,'1 childrens in item5');equals($1_6.getChildrensCount(),0,'0 childrens in item6');equals($1_7.getChildrensCount(),0,'0 childrens in item7');ok(this.$1_0.getParent()==null,'Parent is null (it\'s root)');ok($1_0.getParent()===this.$1_0,'Correct Parent');ok($1_1.getParent()===$1_0,'Correct Parent');ok($1_2.getParent()===$1_0,'Correct Parent');ok($1_7.getParent()===$1_0,'Correct Parent');ok($1_3.getParent()===$1_2,'Correct Parent');ok($1_4.getParent()===$1_2,'Correct Parent');ok($1_5.getParent()===$1_4,'Correct Parent');ok($1_6.getParent()===$1_5,'Correct Parent');ok(this.$1_0.getRoot()===this.$1_0,'Correct root');ok($1_0.getRoot()===this.$1_0,'Correct root');ok($1_1.getRoot()===this.$1_0,'Correct root');ok($1_2.getRoot()===this.$1_0,'Correct root');ok($1_3.getRoot()===this.$1_0,'Correct root');ok($1_4.getRoot()===this.$1_0,'Correct root');ok($1_5.getRoot()===this.$1_0,'Correct root');ok($1_6.getRoot()===this.$1_0,'Correct root');ok($1_7.getRoot()===this.$1_0,'Correct root');ok($1_0.getScormType()==null,'Correct scorm type');equals($1_1.getScormType(),'sco','Correct scorm type');equals($1_2.getScormType(),'asset','Correct scorm type');equals($1_3.getScormType(),'sco','Correct scorm type');equals($1_4.getScormType(),'asset','Correct scorm type');equals($1_5.getScormType(),'asset','Correct scorm type');equals($1_6.getScormType(),'sco','Correct scorm type');equals($1_7.getScormType(),'sco','Correct scorm type');ok(this.$1_0.getFirstAvailableSCO()===$1_1,'First available SCO node');ok(this.$1_0.getActiveAPI()==null,'ActiveAPI is null initially');var $1_8=new SCORM_1_2.API_LIB($1_1);this.$1_0.setActiveAPI($1_8);ok(this.$1_0.getActiveAPI()===$1_8,'ActiveAPI is set');ok($1_8.getActivityTreeNode().getNextNode()===$1_2,'item2 is a next node');ok($1_2.getNextNode()===$1_3,'item3 is a next node');ok($1_3.getNextNode()===$1_4,'item4 is a next node');ok($1_4.getNextNode()===$1_5,'item5 is a next node');ok($1_5.getNextNode()===$1_6,'item6 is a next node');ok($1_6.getNextNode()===$1_7,'item7 is a next node');ok($1_7.getNextNode()==null,'there is no next node for item7');ok($1_7.getPrevNode()===$1_6,'item6 is a prev node');ok($1_6.getPrevNode()===$1_5,'item5 is a prev node');ok($1_5.getPrevNode()===$1_4,'item4 is a prev node');ok($1_4.getPrevNode()===$1_3,'item3 is a prev node');ok($1_3.getPrevNode()===$1_2,'item2 is a prev node');ok($1_2.getPrevNode()===$1_1,'item1 is a prev node');ok($1_1.getPrevNode()===$1_0,'organization is a prev node');}));test('ActivityTreeNodeEventHandler',Delegate.create(this,function(){
expect(55);this.$1_0.add_eventSCO(Delegate.create(this,this.$1_1));var $1_0=this.$1_0.addNode('Organization 1','Org1',null,null,true);var $1_1=$1_0.addNode('Title 1','Identifier1','url1','sco',true);var $1_2=$1_0.addNode('Title 2','Identifier2','url2','sco',true);var $1_3=$1_0.addNode('Title 3','Identifier3',null,'asset',true);var $1_4=$1_3.addNode('Title 4','Identifier4','url4','sco',true);ok(this.$1_0.getActiveAPI()==null,'Initially active node empty');this.$1_0.requestNavigation('continue');ok(this.$1_0.getActiveAPI()==null,'Can\'t move next from empty active node');this.$1_0.requestNavigation('previous');ok(this.$1_0.getActiveAPI()==null,'Can\'t move prev from empty active node');this.$1_0.requestNavigation('start');ok(this.$1_0.getActiveAPI().getActivityTreeNode()===$1_1,'item1 is active');this.$1_0.requestNavigation('continue');ok(this.$1_0.getActiveAPI().getActivityTreeNode()===$1_2,'item2 is active');this.$1_0.requestNavigation('continue');ok(this.$1_0.getActiveAPI().getActivityTreeNode()===$1_4,'item4 is active');this.$1_0.requestNavigation('continue');ok(this.$1_0.getActiveAPI().getActivityTreeNode()===$1_4,'item4 still active');this.$1_0.requestNavigation('continue');ok(this.$1_0.getActiveAPI().getActivityTreeNode()===$1_4,'item4 still active');this.$1_0.requestNavigation('previous');ok(this.$1_0.getActiveAPI().getActivityTreeNode()===$1_2,'item2 is active');this.$1_0.requestNavigation('previous');ok(this.$1_0.getActiveAPI().getActivityTreeNode()===$1_1,'item1 is active');this.$1_0.requestNavigation('previous');ok(this.$1_0.getActiveAPI().getActivityTreeNode()===$1_1,'item1 still active');this.$1_0.requestNavigation('previous');ok(this.$1_0.getActiveAPI().getActivityTreeNode()===$1_1,'item1 still active');this.$1_0.requestNavigation('previous');ok(this.$1_0.getActiveAPI().getActivityTreeNode()===$1_1,'item1 still active');this.$1_0.requestNavigation('continue');ok(this.$1_0.getActiveAPI().getActivityTreeNode()===$1_2,'item2 is active');this.$1_0.requestNavigation('previous');ok(this.$1_0.getActiveAPI().getActivityTreeNode()===$1_1,'item1 is active');ok(!this.$1_0.getActiveAPI().isFinishAttempted(),'item1 finish not attempted');this.$1_0.requestNavigation('{target=Identifier1}choice');ok(this.$1_0.getActiveAPI().getActivityTreeNode()===$1_1,'item1 is active');ok(!this.$1_0.getActiveAPI().isFinishAttempted(),'item1 finish not attempted');this.$1_0.requestNavigation('{target=Identifier3}choice');ok(this.$1_0.getActiveAPI().getActivityTreeNode()===$1_1,'item1 still active');ok(this.$1_0.getActiveAPI().isFinishAttempted(),'item1 finish attempted');this.$1_0.requestNavigation('continue');ok(this.$1_0.getActiveAPI().getActivityTreeNode()===$1_2,'item2 is active');ok(!this.$1_0.getActiveAPI().isFinishAttempted(),'item2 finish not attempted');this.$1_0.requestNavigation('{target=Identifier2}choice');ok(this.$1_0.getActiveAPI().getActivityTreeNode()===$1_2,'item2 is active');this.$1_0.requestNavigation('{target=Identifier3}choice');ok(this.$1_0.getActiveAPI().getActivityTreeNode()===$1_2,'item2 still active');ok(this.$1_0.getActiveAPI().isFinishAttempted(),'item2 finish attempted');}));test('GetFirstAvailableSCO',Delegate.create(this,function(){
var $1_0=this.$1_0.addNode('Organization 2','Org2',null,null,true);var $1_1=this.$1_0.addNode('Organization 1','Org1',null,null,true);equals(this.$1_0.getChildrensCount(),2,'2 organizations');ok(this.$1_0.getOrganization()===$1_1,'Correct Default organization');var $1_2=$1_0.addNode('Title 1 (Org2)','Identifier1_2','url1_2','sco',true);var $1_3=$1_1.addNode('Title 1 (Org1)','Identifier1_1','url1_1','sco',true);$1_3.setLessonstatus('complete');ok(this.$1_0.getFirstAvailableSCO()===$1_3,'First available SCO node');var $1_4=$1_1.addNode('Title 2 (Org1)','Identifier2_1','url2_1','sco',true);$1_4.setLessonstatus('not attempted');ok(this.$1_0.getFirstAvailableSCO()===$1_4,'First available SCO node');var $1_5=$1_1.addNode('Title 3 (Org1)','Identifier3_1','url3_1','sco',true);$1_5.setLessonstatus('incomplete');ok(this.$1_0.getFirstAvailableSCO()===$1_5,'First available SCO node');}));test('nav.event',Delegate.create(this,function(){
expect(19);this.$1_0.add_eventSCO(Delegate.create(this,this.$1_1));var $1_0=this.$1_0.addNode('Organization 1','Org1',null,null,true);var $1_1=$1_0.addNode('Title 1','Identifier1','url1','sco',true);var $1_2=$1_0.addNode('Title 2','Identifier2',null,'asset',true);var $1_3=$1_2.addNode('Title 3','Identifier3','url2','sco',true);this.$1_0.requestNavigation('start');ok(this.$1_0.getActiveAPI().getActivityTreeNode()===$1_1,'\'start\' event accepted');$1_1.setDataTreeValue('nav.event','continue',false);this.$1_0.getActiveAPI().LMSFinish('');ok(this.$1_0.getActiveAPI().getActivityTreeNode()===$1_3,'\'continue\' event accepted');$1_3.setDataTreeValue('nav.event','previous',false);this.$1_0.getActiveAPI().LMSFinish('');ok(this.$1_0.getActiveAPI().getActivityTreeNode()===$1_1,'\'previous\' event accepted');this.$1_0=new SCORM_1_2.ActivityTree('Org1',null,true);this.$1_0.add_eventSCO(Delegate.create(this,this.$1_1));$1_0=this.$1_0.addNode('Organization 1','Org1',null,null,true);$1_1=$1_0.addNode('Title 1','Identifier1','url1','sco',true);$1_2=$1_0.addNode('Title 2','Identifier2',null,'asset',true);$1_3=$1_2.addNode('Title 3','Identifier3','url2','sco',true);this.$1_0.requestNavigation('start');ok(this.$1_0.getActiveAPI().getActivityTreeNode()===$1_1,'\'start\' event accepted');this.$1_0.getActiveAPI().LMSFinish('');ok(this.$1_0.getActiveAPI().getActivityTreeNode()===$1_3,'auto \'continue\' event accepted');this.$1_0.getActiveAPI().LMSFinish('');ok(this.$1_0.getActiveAPI().getActivityTreeNode()===$1_3,'auto \'continue\' - no more available activity node');equals(this.$1_0.getActiveAPI().LMSGetLastError(),'0','no LMS problems');this.$1_0.getActiveAPI().LMSInitialize('');$1_3.setDataTreeValue('nav.event','{target=Identifier1}choice',false);this.$1_0.getActiveAPI().LMSFinish('');ok(this.$1_0.getActiveAPI().getActivityTreeNode()===$1_1,'Item1 choice');}));test('OnEventSCO [LMSCommit]',Delegate.create(this,function(){
expect(2);var $1_0=new SCORM_1_2.API_LIB(this.$1_0.addNode('Test1','I001','#','sco',true));this.$1_0.add_eventSCO(Delegate.create(this,this.$1_1));$1_0.LMSInitialize('');var $1_1=$1_0.LMSCommit('');equals($1_1,'true','Commit completes successfully');}));test('OnEventSCO [LMSFinish and LMSCommit combinations]',Delegate.create(this,function(){
expect(3);var $1_0=new SCORM_1_2.API_LIB(this.$1_0.addNode('Test1','I001','#','sco',true));$1_0.LMSInitialize('');$1_0.LMSCommit('');this.$1_0.add_eventSCO(Delegate.create(this,this.$1_1));$1_0.LMSCommit('');var $1_1=$1_0.LMSFinish('');equals($1_1,'true','Finish completes successfully');}));test('Evaluate Prerequisites (AICC Script)',Delegate.create(this,function(){
var $1_0=this.$1_0.addNode('Organization 1','Org1',null,null,true);var $1_1=$1_0.addNode('Title 1','Identifier1','url1','sco',true);var $1_2=$1_0.addNode('Title 2','Identifier2','url2','sco',true);var $1_3=$1_0.addNode('Title 3','Identifier3','url3','sco',true);var $1_4=$1_0.addNode('Title 4','Identifier4','url4','sco',true);var $1_5=$1_0.addNode('Title 5','Identifier5','url5','sco',true);var $1_6=$1_0.addNode('Title 6','Identifier6','url3','sco',true);ok(!this.$1_0.evaluatePrerequisites(''),'Correct');ok(!this.$1_0.evaluatePrerequisites(null),'Correct');ok(!this.$1_0.evaluatePrerequisites('text'),'Correct');ok(!this.$1_0.evaluatePrerequisites('text*{Identifier1, Identifier2}'),'Correct');ok(!this.$1_0.evaluatePrerequisites('Identifier1||||Identifier2'),'Correct');ok(!this.$1_0.evaluatePrerequisites('Identifier1&&&&Identifier2'),'Correct');ok(!this.$1_0.evaluatePrerequisites('Identifier1'),'Correct');ok(this.$1_0.evaluatePrerequisites('~Identifier1'),'Correct');$1_1.setLessonstatus('passed');ok(this.$1_0.evaluatePrerequisites('Identifier1'),'Correct');ok(!this.$1_0.evaluatePrerequisites('~Identifier1'),'Correct');ok(!this.$1_0.evaluatePrerequisites('Identifier1 & Identifier6'),'Correct');ok(this.$1_0.evaluatePrerequisites('Identifier1 | Identifier6'),'Correct');$1_6.setLessonstatus('completed');ok(this.$1_0.evaluatePrerequisites('Identifier1 &amp; Identifier6'),'Correct');ok(!this.$1_0.evaluatePrerequisites('~Identifier1&~Identifier6'),'Correct');ok(this.$1_0.evaluatePrerequisites('Identifier1 & Identifier6 | Identifier2'),'Correct');ok(!this.$1_0.evaluatePrerequisites('Identifier1 & Identifier6 & Identifier2'),'Correct');ok(this.$1_0.evaluatePrerequisites('Identifier1 | Identifier6 & Identifier2'),'Correct');ok(!this.$1_0.evaluatePrerequisites('(Identifier1 | Identifier6) & Identifier2'),'Correct');ok(this.$1_0.evaluatePrerequisites('(Identifier1 | Identifier6) & ~Identifier2'),'Correct');ok(this.$1_0.evaluatePrerequisites('Identifier1 | Identifier2 | Identifier3 | Identifier4 | Identifier5 | Identifier6'),'Correct');ok(this.$1_0.evaluatePrerequisites('1*{Identifier1, Identifier2}'),'Correct');ok(!this.$1_0.evaluatePrerequisites('2*{Identifier1, Identifier2}'),'Correct');ok(this.$1_0.evaluatePrerequisites('1*{Identifier1, Identifier2}|2*{Identifier1, Identifier2}'),'Correct');ok(!this.$1_0.evaluatePrerequisites('1*{Identifier1, Identifier2}&2*{Identifier1, Identifier2}'),'Correct');ok(this.$1_0.evaluatePrerequisites('Identifier1 = \"passed\"'),'Correct');ok(!this.$1_0.evaluatePrerequisites('Identifier1 <> \"passed\"'),'Correct');ok(this.$1_0.evaluatePrerequisites('Identifier2 = \"not attempted\"'),'Correct');ok(!this.$1_0.evaluatePrerequisites('Identifier2 <> \"not attempted\"'),'Correct');ok(this.$1_0.evaluatePrerequisites('Identifier6 = \"completed\"'),'Correct');ok(!this.$1_0.evaluatePrerequisites('Identifier6 <> \"completed\"'),'Correct');ok(!this.$1_0.evaluatePrerequisites('Identifier3 = \"completed\"'),'Correct');ok(this.$1_0.evaluatePrerequisites('Identifier1 = \"passed\" & Identifier6 = \"completed\"'),'Correct');ok(!this.$1_0.evaluatePrerequisites('Identifier1 = \"passed\" & Identifier3 = \"completed\"'),'Correct');ok(!this.$1_0.evaluatePrerequisites('(Identifier1 = \"passed\" | Identifier6 = \"completed\") & Identifier2'),'Correct');ok(this.$1_0.evaluatePrerequisites('(Identifier1 = \"passed\" | Identifier6 = \"completed\") & Identifier2 <> \'completed\''),'Correct');ok(this.$1_0.evaluatePrerequisites('(Identifier1 = \"passed\" | Identifier6 = \"completed\") & Identifier2 <> \'completed\' & 1*{Identifier1, Identifier2} & ~Identifier3'),'Correct');}));},$1_1:function($p0,$p1){if($p1.get_eventType()===5||$p1.get_eventType()===3){if(this.$1_0.getActiveAPI()!=null&&!this.$1_0.getActiveAPI().isFinishAttempted()){this.$1_0.getActiveAPI().LMSFinish('');ok(true,'[Simulate Terminate when SCO unloaded ('+(($p1.get_eventType()===5)?'END_SESSION':'EXIT')+' - '+this.$1_0.getActiveAPI().getActivityTreeNode().getIdentifier()+')]');}}else if($p1.get_eventType()===1){ok(true,'OnEventSCO triggered for COMMIT eventType');}else if($p1.get_eventType()===2){if(this.$1_0.getActiveAPI()!=null&&!this.$1_0.getActiveAPI().isFinishAttempted()){this.$1_0.getActiveAPI().LMSFinish('');ok(true,'[Simulate Terminate when SCO unloaded (DELIVERY_REQUEST - '+this.$1_0.getActiveAPI().getActivityTreeNode().getIdentifier()+')]');}if($p1.get_treeNode()!=null){this.$1_0.setActiveAPI(new SCORM_1_2.API_LIB($p1.get_treeNode()));this.$1_0.getActiveAPI().LMSInitialize('');ok(true,'[Simulate Initialize when SCO loaded (DELIVERY_REQUEST - '+$p1.get_treeNode().getIdentifier()+')]');}}}}
TestAPI.TestManifest=function(){TestAPI.TestManifest.constructBase(this);}
TestAPI.TestManifest.prototype={$1_0:null,$1_1:null,$1_2:null,$1_3:'<manifest identifier=\"Manifest\" version=\"1.1\" xml:base=\"mycontent1/\"\r\n      xmlns=\"http://www.imsproject.org/xsd/imscp_rootv1p1p2\"\r\n      xmlns:adlcp=\"http://www.adlnet.org/xsd/adlcp_rootv1p2\"\r\n      xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n      xsi:schemaLocation= \r\n                  \"http://www.imsproject.org/xsd/imscp_rootv1p1p2 \r\n                   imscp_rootv1p1p2.xsd \r\n                   http://www.imsglobal.org/xsd/imsmd_rootv1p2p1\r\n                   imsmd_rootv1p2p1.xsd  \r\n                   http://www.adlnet.org/xsd/adlcp_rootv1p2\r\n                   adlcp_rootv1p2.xsd\">\r\n    <metadata>\r\n        <schema>ADL SCORM</schema>\r\n        <schemaversion>1.2</schemaversion>\r\n        <adlcp:location>courseMetadata.xml</adlcp:location>\r\n    </metadata>\r\n\r\n    <organizations default=\"Org1\">\r\n        <organization identifier=\"Org0\">\r\n            <title>TestOrg0</title>\r\n        </organization>\r\n        <organization identifier=\"Org1\">\r\n            <title>TestOrg1</title>\r\n            <item identifier=\"item1\">\r\n                <title>Title1</title>\r\n                <item identifier=\"item1_1\" identifierref=\"item1_1_res\" parameters=\"?a=1&#038;b=2\">\r\n                    <title>Title1_1</title>\r\n                    <adlcp:maxtimeallowed>00:30:00</adlcp:maxtimeallowed>\r\n                    <adlcp:timelimitaction>continue,message</adlcp:timelimitaction>\r\n                    <adlcp:datafromlms>test 1</adlcp:datafromlms>\r\n                    <adlcp:masteryscore>90</adlcp:masteryscore>\r\n                </item>\r\n                <item identifier=\"item1_2\" identifierref=\"item1_2_res\" parameters=\"a=1&#038;b=2\">\r\n                    <title>Title1_2</title>\r\n                    <adlcp:prerequisites type=\"aicc_script\">item1_1</adlcp:prerequisites>\r\n                </item>\r\n            </item>\r\n            <item identifier=\"item2\">\r\n                <title>Title2</title>\r\n                <item identifier=\"item2_1\" identifierref=\"item2_1_res\" isvisible=\"true\" parameters=\"#1\">\r\n                    <title>Title2_1</title>\r\n                    <adlcp:prerequisites type=\"aicc_script\"><![CDATA[item1_1&item1_2]]></adlcp:prerequisites>\r\n                </item>\r\n                <item identifier=\"item2_2\" identifierref=\"item2_2_res\" isvisible=\"false\" parameters=\"a=1&amp;b=2#2\">\r\n                    <title>Title2_2</title>\r\n                </item>\r\n            </item>\r\n        </organization>\r\n    </organizations>\r\n\r\n    <resources xml:base=\"resources1/\">\r\n        <resource identifier=\"item1_1_res\" type=\"webcontent\" adlcp:scormtype=\"sco\" href=\"path/index1.html\"/>\r\n        <resource identifier=\"item1_2_res\" type=\"webcontent\" adlcp:scormtype=\"sco\" href=\"path/index2.html\"/>\r\n        <resource identifier=\"item2_1_res\" type=\"webcontent\" adlcp:scormtype=\"sco\" href=\"index3.html\" xml:base=\"/resources2/\"/>\r\n        <resource identifier=\"item2_2_res\" type=\"webcontent\" adlcp:scormtype=\"sco\" href=\"index4.html\" xml:base=\"additional/\"/>\r\n    </resources>\r\n</manifest>',$1_4:null,$1_5:'<manifest identifier=\"Manifest\" version=\"1.1\" xml:base=\"http://test.com/course/\"\r\n      xmlns=\"http://www.imsproject.org/xsd/imscp_rootv1p1p2\"\r\n      xmlns:adlcp=\"http://www.adlnet.org/xsd/adlcp_rootv1p2\"\r\n      xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n      xsi:schemaLocation= \r\n                  \"http://www.imsproject.org/xsd/imscp_rootv1p1p2 \r\n                   imscp_rootv1p1p2.xsd \r\n                   http://www.imsglobal.org/xsd/imsmd_rootv1p2p1\r\n                   imsmd_rootv1p2p1.xsd  \r\n                   http://www.adlnet.org/xsd/adlcp_rootv1p2\r\n                   adlcp_rootv1p2.xsd\">\r\n\r\n     <metadata>\r\n        <schema>ADL SCORM</schema>\r\n        <schemaversion>1.2</schemaversion>\r\n    </metadata>\r\n\r\n    <organizations>\r\n        <organization identifier=\"Org1\" adlcp:sharedDataGlobalToSystem=\"false\">\r\n            <title>TestOrg1</title>\r\n            <item identifier=\"item1\">\r\n                <title>Title1</title>\r\n                <item identifier=\"item1_1\" identifierref=\"item1_1_res\" parameters=\"?a=1&#038;b=2\">\r\n                    <title>Title1_1</title>\r\n                </item>\r\n                <item identifier=\"item1_2\" identifierref=\"item1_2_res\">\r\n                    <title>Title1_2</title>\r\n                </item>\r\n            </item>\r\n        </organization>\r\n    </organizations>\r\n\r\n    <resources  xml:base=\"/coursebase/\">\r\n        <resource identifier=\"item1_1_res\" type=\"webcontent\" adlcp:scormtype=\"asset\" href=\"path/index1.html\"/>\r\n        <resource identifier=\"item1_2_res\" type=\"webcontent\" adlcp:scormtype=\"asset\" href=\"path/index2.html\"  xml:base=\"/coursebase2/\"/>\r\n    </resources>\r\n</manifest>',$1_6:null,$1_7:'<manifest identifier=\"Manifest\" version=\"1.1\" xml:base=\"http://test.com/course/\"\r\n      xmlns=\"http://www.imsproject.org/xsd/imscp_rootv1p1p2\"\r\n      xmlns:adlcp=\"http://www.adlnet.org/xsd/adlcp_rootv1p2\"\r\n      xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n      xsi:schemaLocation= \r\n                  \"http://www.imsproject.org/xsd/imscp_rootv1p1p2 \r\n                   imscp_rootv1p1p2.xsd \r\n                   http://www.imsglobal.org/xsd/imsmd_rootv1p2p1\r\n                   imsmd_rootv1p2p1.xsd  \r\n                   http://www.adlnet.org/xsd/adlcp_rootv1p2\r\n                   adlcp_rootv1p2.xsd\">\r\n\r\n     <metadata>\r\n        <schema>ADL SCORM</schema>\r\n        <schemaversion>1.2</schemaversion>\r\n    </metadata>\r\n\r\n    <organizations>\r\n        <organization identifier=\"Org1\" adlcp:sharedDataGlobalToSystem=\"false\">\r\n            <title>TestOrg0</title>\r\n            <item identifier=\"item1_1\" identifierref=\"item1_1_res\" parameters=\"?a=1&#038;b=2\">\r\n                <title>Title1_1</title>\r\n            </item>\r\n        </organization>\r\n    </organizations>\r\n\r\n    <resources  xml:base=\"/coursebase/\">\r\n        <resource identifier=\"item1_1_res\" type=\"webcontent\" adlcp:scormtype=\"asset\" href=\"path/index1.html\"/>\r\n    </resources>\r\n</manifest>',$1_8:null,$1_9:'<manifest identifier=\"Manifest\" version=\"1.1\" xml:base=\"mycontent1/\"\r\n      xmlns=\"http://www.imsproject.org/xsd/imscp_rootv1p1p2\"\r\n      xmlns:adlcp=\"http://www.adlnet.org/xsd/adlcp_rootv1p2\"\r\n      xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n      xsi:schemaLocation= \r\n                  \"http://www.imsproject.org/xsd/imscp_rootv1p1p2 \r\n                   imscp_rootv1p1p2.xsd \r\n                   http://www.imsglobal.org/xsd/imsmd_rootv1p2p1\r\n                   imsmd_rootv1p2p1.xsd  \r\n                   http://www.adlnet.org/xsd/adlcp_rootv1p2\r\n                   adlcp_rootv1p2.xsd\">\r\n    <metadata>\r\n        <schema>ADL SCORM</schema>\r\n        <schemaversion>1.2</schemaversion>\r\n        <adlcp:location>courseMetadata.xml</adlcp:location>\r\n    </metadata>\r\n  <organizations default=\"Org1\">\r\n    <organization identifier=\"Org1\">\r\n      <title>TEST</title>\r\n\r\n      <item identifier=\"parent_item\">\r\n        <title>Parent</title>\r\n        <item identifier=\"SCO1_item\" identifierref=\"SCO1_resource\">\r\n          <title>SCO 1</title>\r\n          <adlcp:prerequisites type=\"aicc_script\">SCO3_item</adlcp:prerequisites>\r\n        </item>\r\n        <item identifier=\"SCO2_item\" identifierref=\"SCO2_resource\">\r\n          <title>SCO 2</title>\r\n        </item>\r\n        <item identifier=\"SCO3_item\" identifierref=\"SCO3_resource\">\r\n          <title>SCO 3</title>\r\n          <adlcp:prerequisites type=\"aicc_script\">SCO2_item</adlcp:prerequisites>\r\n        </item>\r\n      </item>\r\n\r\n    </organization>\r\n  </organizations>\r\n\r\n  <resources>\r\n    <resource identifier=\"SCO1_resource\" type=\"webcontent\" adlcp:scormtype=\"sco\" href=\"sco1.html\"/>\r\n    <resource identifier=\"SCO2_resource\" type=\"webcontent\" adlcp:scormtype=\"sco\" href=\"sco2.html\"/>\r\n    <resource identifier=\"SCO3_resource\" type=\"webcontent\" adlcp:scormtype=\"sco\" href=\"sco3.html\"/>\r\n  </resources>\r\n</manifest>',setup:function(){this.$1_0=new SCORM_1_2.ActivityTree('Org1',this.$1_1,false);this.$1_2=XMLDocumentParser.parse(this.$1_3);this.$1_4=XMLDocumentParser.parse(this.$1_5);this.$1_6=XMLDocumentParser.parse(this.$1_7);this.$1_8=XMLDocumentParser.parse(this.$1_9);},teardown:function(){this.$1_0=null;this.$1_1=null;this.$1_2=null;this.$1_4=null;this.$1_6=null;this.$1_8=null;},tests:function(){test('InitByManifest 1 (first attempt - activityTree empty)',Delegate.create(this,function(){
this.$1_0.initByManifest(null,this.$1_2);ok(!this.$1_0.isSingleItem(),'Is not single item tree');ok(!isNullOrUndefined(this.$1_0),'ActivityTree not empty');ok(!isNullOrUndefined(this.$1_0.getOrganization()),'Default organization is not empty');ok(this.$1_0.getChildrensCount()===1,'Only one organization available');var $1_0=this.$1_0.getOrganization();equals($1_0.getIdentifier(),'Org1','Default organization identifier \'Org1\'');equals($1_0.getTitle(),'TestOrg1','Default organization title \'TestOrg1\'');ok($1_0.isVisible(),'Default organization visible');ok(isNullOrUndefined($1_0.getUrl()),'Default organization has no URL');equals($1_0.getChildrensCount(),2,'2 childs in organization');var $1_1=$1_0.getChildrens()[0];equals($1_1.getIdentifier(),'item1','Correct item1 identifier');equals($1_1.getTitle(),'Title1','Correct item1 title');ok($1_1.isVisible(),'item1 is visible');ok(isNullOrUndefined($1_1.getUrl()),'item1 has no URL');equals($1_1.getChildrensCount(),2,'2 childs in item1');var $1_2=$1_1.getChildrens()[0];equals($1_2.getIdentifier(),'item1_1','Correct item1_1 identifier');equals($1_2.getTitle(),'Title1_1','Correct item1_1 title');ok($1_2.isVisible(),'item1_1 is visible');equals($1_2.getUrl(),'mycontent1/resources1/path/index1.html?a=1&b=2','Correct item1_1  URL');equals($1_2.getMaxtimeallowed(),'00:30:00','Correct item1_1 maxtimeallowed');equals($1_2.getTimelimitaction(),'continue,message','Correct item1_1 timelimitaction');equals($1_2.getDatafromlms(),'test 1','Correct item1_1 datafromlms');equals($1_2.getMasteryscore(),'90','Correct item1_1 masteryscore');ok($1_2.isEnabled(),'Correct item1_1 enabled');equals($1_2.getChildrensCount(),0,'0 childs in item1_1');var $1_3=$1_1.getChildrens()[1];equals($1_3.getIdentifier(),'item1_2','Correct item1_2 identifier');equals($1_3.getTitle(),'Title1_2','Correct item1_2 title');ok($1_3.isVisible(),'item1_2 is visible');equals($1_3.getUrl(),'mycontent1/resources1/path/index2.html?a=1&b=2','Correct item1_2  URL');equals($1_3.getPrerequisites(),'item1_1','Correct item1_2 prerequisites');ok(!$1_3.isEnabled(),'Correct item1_2 disabled');equals($1_3.getChildrensCount(),0,'0 childs in item1_2');var $1_4=$1_0.getChildrens()[1];equals($1_4.getIdentifier(),'item2','Correct item2 identifier');equals($1_4.getTitle(),'Title2','Correct item2 title');ok($1_4.isVisible(),'item2 is visible');ok(isNullOrUndefined($1_4.getUrl()),'item2 has no URL');equals($1_4.getChildrensCount(),2,'2 childs in item2');var $1_5=$1_4.getChildrens()[0];equals($1_5.getIdentifier(),'item2_1','Correct item2_1 identifier');equals($1_5.getTitle(),'Title2_1','Correct item2_1 title');ok($1_5.isVisible(),'item2_1 is visible');equals($1_5.getUrl(),'resources2/index3.html?#1','Correct item2_1  URL');equals($1_5.getPrerequisites(),'item1_1&item1_2','Correct item2_1 prerequisites');ok(!$1_5.isEnabled(),'Correct item2_1 disabled');equals($1_5.getChildrensCount(),0,'0 childs in item2_1');var $1_6=$1_4.getChildrens()[1];equals($1_6.getIdentifier(),'item2_2','Correct item1_2 identifier');equals($1_6.getTitle(),'Title2_2','Correct item1_2 title');ok(!$1_6.isVisible(),'item2_2 is not visible');equals($1_6.getUrl(),'mycontent1/resources1/additional/index4.html?a=1&b=2#2','Correct item2_2  URL');ok($1_6.isEnabled(),'Correct item2_2 enabled');equals($1_6.getChildrensCount(),0,'0 childs in item2_2');this.$1_0=new SCORM_1_2.ActivityTree('Org1',this.$1_1,false);this.$1_0.initByManifest('demo/course',this.$1_2);$1_0=this.$1_0.getOrganization();$1_1=$1_0.getChildrens()[0];$1_2=$1_1.getChildrens()[0];equals($1_2.getUrl(),'demo/course/mycontent1/resources1/path/index1.html?a=1&b=2','Correct item1_1  URL');}));test('InitByManifest 2 (first attempt - activityTree empty)',Delegate.create(this,function(){
this.$1_0.initByManifest(null,this.$1_4);ok(!this.$1_0.hasPrerequisites(),'Has no prerequisites');ok(!this.$1_0.isSingleItem(),'Is not single item tree');var $1_0=this.$1_0.getOrganization();equals($1_0.getIdentifier(),'Org1','Default organization identifier \'Org1\'');equals($1_0.getTitle(),'TestOrg1','Default organization title \'TestOrg1\'');ok($1_0.isVisible(),'Default organization visible');ok(isNullOrUndefined($1_0.getUrl()),'Default organization has no URL');equals($1_0.getChildrensCount(),1,'1 childs in organization');var $1_1=$1_0.getChildrens()[0];ok(isNullOrUndefined($1_1.getUrl()),'item1 has no URL');var $1_2=$1_1.getChildrens()[0];equals($1_2.getUrl(),'http://test.com/coursebase/path/index1.html?a=1&b=2','Correct item1_1 URL');var $1_3=$1_1.getChildrens()[1];equals($1_3.getUrl(),'http://test.com/coursebase2/path/index2.html','Correct item1_2 URL');}));test('InitByManifest 3 (single sco)',Delegate.create(this,function(){
this.$1_0.initByManifest(null,this.$1_6);ok(this.$1_0.isSingleItem(),'Is single item tree');}));test('SCO initialization 1',Delegate.create(this,function(){
this.$1_0.initByManifest(null,this.$1_2);this.$1_0.add_eventSCO(Delegate.create(this,this.$1_A));this.$1_0.requestNavigation('start');var $1_0=this.$1_0.getActiveAPI();var $1_1=$1_0.getActivityTreeNode();equals($1_1.getIdentifier(),'item1_1','Correct item1_1 identifier');var $1_2=$1_0.LMSGetValue('cmi.student_data.max_time_allowed');equals($1_0.LMSGetLastError(),'0','No Error');var $1_3=$1_2.split(':');equals($1_3.length,'3','time equals 1 step: size 3');ok($1_3[0]==='00'||$1_3[0]==='0000','time equals 2 step: 00 or 0000');equals($1_3[1],'30','time equals 3 step: 30');ok($1_3[2]==='00'||$1_3[2]==='00.00','time equals 4 step: 00 or 00.00');$1_2=$1_0.LMSGetValue('cmi.student_data.time_limit_action');equals($1_0.LMSGetLastError(),'0','No Error');equals($1_2,'continue,message','Corect time_limit_action value');$1_2=$1_0.LMSGetValue('cmi.launch_data');equals($1_0.LMSGetLastError(),'0','No Error');equals($1_2,'test 1','Corect launch_data');$1_2=$1_0.LMSGetValue('cmi.student_data.mastery_score');equals($1_0.LMSGetLastError(),'0','No Error');equals($1_2,'90','Corect mastery_score');this.$1_0.requestNavigation('continue');equals($1_1.getLessonstatus(),'completed','Correct SCO status');var $1_4=this.$1_0.getActiveAPI().getActivityTreeNode();equals($1_4.getIdentifier(),'item1_2','Correct item1_2 identifier');this.$1_0.getActiveAPI().LMSSetValue('cmi.core.lesson_status','failed');ok(!this.$1_0.getActiveAPI().isFinishAttempted(),'Finish was not attempted yet');this.$1_0.requestNavigation('continue');equals(this.$1_0.getActiveAPI().getActivityTreeNode().getIdentifier(),'item2_2','Skip item2_1.');equals(this.$1_0.getActiveAPI().getActivityTreeNode().getLessonstatus(),'not attempted','Correct SCO status');this.$1_0.requestNavigation('{target=item2_1}choice');equals(this.$1_0.getActiveAPI().getActivityTreeNode().getIdentifier(),'item2_2','Didn\'t choice item2_1. failed status.');this.$1_0.requestNavigation('{target=item1_2}choice');equals(this.$1_0.getActiveAPI().getActivityTreeNode().getIdentifier(),$1_4.getIdentifier(),'Choice item1_2 again');ok(!this.$1_0.getActiveAPI().isFinishAttempted(),'Finish not attempted initially');this.$1_0.getActiveAPI().LMSSetValue('cmi.core.lesson_status','passed');this.$1_0.requestNavigation('continue');equals($1_4.getLessonstatus(),'passed','Correct SCO status');equals(this.$1_0.getActiveAPI().getActivityTreeNode().getIdentifier(),'item2_1','Success continue SCO navigation');this.$1_0.requestNavigation('{target=item1_2}choice');equals(this.$1_0.getActiveAPI().getActivityTreeNode().getIdentifier(),'item1_2','Correct item1_2 identifier');this.$1_0.getActiveAPI().LMSSetValue('cmi.core.lesson_status','incomplete');this.$1_0.getActiveAPI().LMSFinish('');this.$1_0=new SCORM_1_2.ActivityTree('Org1',this.$1_1,false);this.$1_0.initByManifest(null,this.$1_2);this.$1_0.add_eventSCO(Delegate.create(this,this.$1_A));this.$1_0.requestNavigation('start');equals(this.$1_0.getActiveAPI().getActivityTreeNode().getIdentifier(),'item1_2','Correct item1_2 identifier');this.$1_0.requestNavigation('{target=item2_1}choice');equals(this.$1_0.getActiveAPI().getActivityTreeNode().getLessonstatus(),'completed','Correct item2_1 SCO status');equals(this.$1_0.getActiveAPI().getActivityTreeNode().getIdentifier(),'item2_1','Success continue SCO navigation');}));test('Prerequisites',Delegate.create(this,function(){
this.$1_0.initByManifest(null,this.$1_8);this.$1_0.add_eventSCO(Delegate.create(this,this.$1_A));this.$1_0.requestNavigation('start');ok(this.$1_0.hasPrerequisites(),'Has prerequisites');var $1_0=this.$1_0.getActiveAPI().getActivityTreeNode();equals($1_0.getIdentifier(),'SCO2_item','Correct SCO2_item identifier');ok(!this.$1_0.isValidNavigationRequest('continue'),'\'Continue\' not valid');ok(!this.$1_0.isValidNavigationRequest('previous'),'\'Previous\' not valid');ok(!this.$1_0.isValidNavigationRequest('{target=SCO3_item}choice'),'\'{target=SCO3_item}choice\' not valid');ok(!this.$1_0.isValidNavigationRequest('{target=SCO1_item}choice'),'\'{target=SCO1_item}choice\' not valid');this.$1_0.requestNavigation('continue');equals($1_0.getLessonstatus(),'completed','Correct SCO status');var $1_1=this.$1_0.getActiveAPI().getActivityTreeNode();equals($1_1.getIdentifier(),'SCO3_item','Navigation command \'Continue\' complete');ok(!this.$1_0.isValidNavigationRequest('{target=SCO1_item}choice'),'\'{target=SCO1_item}choice\' not valid');ok(this.$1_0.isValidNavigationRequest('{target=SCO2_item}choice'),'\'{target=SCO2_item}choice\' valid');this.$1_0.requestNavigation('{target=SCO2_item}choice');$1_1=this.$1_0.getActiveAPI().getActivityTreeNode();equals($1_1.getIdentifier(),'SCO2_item','Correct sco');this.$1_0.getActiveAPI().LMSSetValue('cmi.core.lesson_status','failed');ok(this.$1_0.isValidNavigationRequest('continue'),'\'Continue\' valid');ok(this.$1_0.isValidNavigationRequest('previous'),'\'Previous\' valid');ok(this.$1_0.isValidNavigationRequest('{target=SCO3_item}choice'),'\'{target=SCO3_item}choice\' valid');ok(this.$1_0.isValidNavigationRequest('{target=SCO1_item}choice'),'\'{target=SCO1_item}choice\' valid');this.$1_0.getActiveAPI().LMSCommit('');ok(!this.$1_0.isValidNavigationRequest('continue'),'\'Continue\' not valid');ok(this.$1_0.isValidNavigationRequest('previous'),'\'Previous\' valid');ok(!this.$1_0.isValidNavigationRequest('{target=SCO3_item}choice'),'\'{target=SCO3_item}choice\' not valid');ok(this.$1_0.isValidNavigationRequest('{target=SCO1_item}choice'),'\'{target=SCO1_item}choice\' valid');this.$1_0.requestNavigation('continue');$1_1=this.$1_0.getActiveAPI().getActivityTreeNode();equals($1_1.getIdentifier(),'SCO2_item','Continue navigation command rejected');equals($1_1.getLessonstatus(),'failed','Correct SCO status');this.$1_0.requestNavigation('{target=SCO3_item}choice');$1_1=this.$1_0.getActiveAPI().getActivityTreeNode();equals($1_1.getIdentifier(),'SCO2_item','Choice navigation command rejected');}));},$1_A:function($p0,$p1){if($p1.get_eventType()===5||$p1.get_eventType()===3){if(this.$1_0.getActiveAPI()!=null&&!this.$1_0.getActiveAPI().isFinishAttempted()){ok(true,'[Simulate Terminate when SCO - '+this.$1_0.getActiveAPI().getActivityTreeNode().getIdentifier()+' unloaded]');this.$1_0.getActiveAPI().LMSFinish('');}if($p1.get_eventType()===5){this.$1_0.setActiveAPI(null);}}else if($p1.get_eventType()===1){ok(true,'OnEventSCO triggered for COMMIT eventType');}else if($p1.get_eventType()===2){if(this.$1_0.getActiveAPI()!=null&&!this.$1_0.getActiveAPI().isFinishAttempted()){this.$1_0.getActiveAPI().LMSFinish('');ok(true,'[Simulate Terminate when SCO - '+this.$1_0.getActiveAPI().getActivityTreeNode().getIdentifier()+' unloaded (DELIVERY_REQUEST - '+(($p1.get_treeNode()!=null)?$p1.get_treeNode().getIdentifier():'null')+')]');}if($p1.get_treeNode()!=null){this.$1_0.setActiveAPI(new SCORM_1_2.API_LIB($p1.get_treeNode()));this.$1_0.getActiveAPI().LMSInitialize('');ok(true,'[Simulate Initialize when SCO loaded (DELIVERY_REQUEST - '+$p1.get_treeNode().getIdentifier()+')]');}}else if($p1.get_eventType()===0){ok(true,'OnEventSCO triggered for FINAL_STORE eventType');this.$1_1=this.$1_0.getStoredStatuses();}}}
function main(){new TestAPI.TestAPI().run('API');new TestAPI.TestActivityTree().run('ActivityTree');new TestAPI.TestManifest().run('Manifest');}
TestAPI.TestAPI.createClass('TestAPI.TestAPI',QUnitLibrary.QTest);TestAPI.TestActivityTree.createClass('TestAPI.TestActivityTree',QUnitLibrary.QTest);TestAPI.TestManifest.createClass('TestAPI.TestManifest',QUnitLibrary.QTest);
// ---- Do not remove this footer ----
// This script was generated using Script# v0.5.5.0 (http://projects.nikhilk.net/ScriptSharp)
// -----------------------------------
